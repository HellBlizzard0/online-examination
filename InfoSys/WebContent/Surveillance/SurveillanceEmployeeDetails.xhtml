<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xmlns:h="http://java.sun.com/jsf/html" xmlns:p="http://primefaces.org/ui" xmlns:f="http://java.sun.com/jsf/core">
<h:head>
	<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />

	<h:outputStylesheet library="css" name="styles.css" />
	<h:outputStylesheet library="css" name="grid.css" />
	<h:outputStylesheet library="css" name="bootstrap.css" />
	
	<h:outputScript name="utilities.js" library="javascript" target="head" />
	<script type="text/javascript">
		var x ;
		window.onunload = unloadPage;
		function unloadPage(){
			if(x != 1){
				window.opener.releaseMask();
			}
			x == 0;
		}

		function releaseMask(){
			unMaskScreen();
	   	}
   function validateData(){
		var homeDescription = document.getElementById("viewSurveillanceEmpForm:homeDescriptionId");
		if($(homeDescription).val().length>250){
			showErrorMessage('#{msgs.error_homeDescriptionExeeded}');
            return false;
        }
	}
	</script>
</h:head>
<h:body styleClass="screenBg" onunload="unloadPage();">
	<h:form id="viewSurveillanceEmpForm" dir="#{msgs.dir}">
		<p:growl showDetail="true" autoUpdate="true" id="notifyMessagesId" />

		<p:ajaxStatus onstart="PF('reload').show();" onsuccess="PF('reload').hide();" />
		<p:dialog id="reload" widgetVar="reload" modal="true" showHeader="false" resizable="false" closable="false">
			<h:graphicImage value="/resources/images/ai.gif" alt="ai" />
		</p:dialog>

		<table border="0" cellpadding="0" cellspacing="3" width="100%" class="bgcolor-pup">
			<tr valign="top">
				<td width="100%">
					<table border="0" cellpadding="0" cellspacing="0" width="100%">
						<tr>
							<td width="100%" height="5" />
						</tr>

						<tr>
							<td class="screenTitle"  >
								<h:outputText value="#{msgs.title_surveillanceEmployeeDetails}" />
							</td>
						</tr>

						<tr>
							<td width="100%" height="5" />
						</tr>

						<tr>
							<td>
								<table width="100%">
									<tr>
										<td width="20%">
											<h:graphicImage id="graphicImageId" width="200px" height="200px" value="/image?id=#{surveillanceEmployeeDetails.personalPhoto.id}" />
											<h:commandButton id="imageHiddenId" action="#{surveillanceEmployeeDetails.refreshSubmit()}" value="" style="display:none;" />
											<p:fileUpload style="width : 200px;" label="#{msgs.label_addPhoto}" auto="true" process="@form" oncomplete="x = 1 ; document.getElementById('viewSurveillanceEmpForm:imageHiddenId').click();" fileUploadListener="#{surveillanceEmployeeDetails.uploadListener}" fileLimit="1" allowTypes="/(\.|\/)(gif|jpe?g|png)$/">
											</p:fileUpload>
										</td>
										<td width="80%">
											<h:panelGroup id="viewEmpPaneId">
												<table width="100%" class="sectionContent" border="0" cellpadding="0" cellspacing="0">
													<tr>
														<th width="15%">#{msgs.label_fullName}</th>
														<td width="35%">
															<h:outputText id="fullNameId" value="#{surveillanceEmployeeDetails.employee.fullName}" />
														</td>
														<th width="15%">#{msgs.label_socialNumber}</th>
														<td width="35%">
															<h:outputText id="socialNumberId" value="#{surveillanceEmployeeDetails.employee.socialID}" />
														</td>
													</tr>

													<tr>
														<td colspan="4" height="5" />
													</tr>


													<tr>
														<th width="15%">#{msgs.label_firstName}</th>
														<td width="35%">
															<h:outputText id="firstNameId" value="#{surveillanceEmployeeDetails.employee.firstName}" />
														</td>
														<th width="15%">#{msgs.label_lastname}</th>
														<td width="35%">
															<h:outputText id="lastNameId" value="#{surveillanceEmployeeDetails.employee.lastName}" />
														</td>
													</tr>

													<tr>
														<td colspan="4" height="5" />
													</tr>

													<tr>
														<th width="15%">#{msgs.label_mobileNo}</th>
														<td width="35%">
															<h:outputText id="mobileNoId" value="#{surveillanceEmployeeDetails.employee.mobileNumber}" />
														</td>
														<th width="15%">#{msgs.label_email}</th>
														<td width="35%">
															<h:outputText id="emailId" value="#{surveillanceEmployeeDetails.employee.email}" />
														</td>
													</tr>

													<tr>
														<td colspan="4" height="5" />
													</tr>

													<tr>
														<th width="15%">#{msgs.label_gender}</th>
														<td width="35%">
															<h:outputText id="maleId" value="#{msgs.label_male}" rendered="#{surveillanceEmployeeDetails.employee.gender == 1}" />
															<h:outputText id="femaleId" value="#{msgs.label_female}" rendered="#{surveillanceEmployeeDetails.employee.gender == 0}" />
														</td>
														<th width="15%">#{msgs.label_rank}</th>
														<td width="35%">
															<h:outputText id="rankId" value="#{surveillanceEmployeeDetails.employee.rank}" />
														</td>
													</tr>

													<tr>
														<td colspan="4" height="5" />
													</tr>

													<tr>
														<th width="15%">#{msgs.label_militaryNumber}</th>
														<td width="35%">
															<h:outputText id="militaryNumberId" value="#{surveillanceEmployeeDetails.employee.militaryNo}" />
														</td>
														<th width="15%">#{msgs.label_department}</th>
														<td width="35%">
															<h:outputText id="departmentId" value="#{surveillanceEmployeeDetails.employee.actualDepartmentName}" />
														</td>
													</tr>
												</table>
											</h:panelGroup>
										</td>
									</tr>
								</table>
							</td>
						</tr>
<tr>
														<td height="10" />
													</tr>

						<tr>
							<td class="screenTitle" bgcolor="#006AA9">
							<br/>
								<h:outputText value="#{msgs.label_surveillanceEmployeeExtraDetails}" />
							</td>
						</tr>

						<tr>
							<td width="100%">
								<h:panelGroup id="viewEmpDetailPaneId">
									<table class="sectionContent" border="0" cellpadding="0" cellspacing="0">
										<tr>
											<th width="15%">#{msgs.label_qualification}</th>
											<td width="25%">
												<h:selectOneMenu styleClass="form-control" value="#{surveillanceEmployeeDetails.employeeDetail.qualificationId}">
													<f:selectItems value="#{surveillanceEmployeeDetails.qualificationsDataList}" var="qual" itemValue="#{qual.id}" itemLabel="#{qual.description}" />
												</h:selectOneMenu>
											</td>
											

											<th width="15%">#{msgs.label_maritalStatus}</th>
											<td width="25%">
												<h:selectOneMenu styleClass="form-control" value="#{surveillanceEmployeeDetails.employeeDetail.maritalStatus}">
													<f:selectItem itemValue="0" itemLabel="#{msgs.label_single}" />
													<f:selectItem itemValue="1" itemLabel="#{msgs.label_married}" />
												</h:selectOneMenu>
											</td>
											
										</tr>

										<tr>
											<th width="15%">#{msgs.label_phoneNumber}</th>
											<td width="25%">
												<h:inputText maxlength="19" styleClass="form-control" onblur="return isPhoneNumber(this);" onkeypress="return checkPhoneNumber(event);" value="#{surveillanceEmployeeDetails.employeeDetail.phoneNumber}" />
											</td>
											
											<th width="15%">#{msgs.label_mobileNumber}</th>
											<td width="25%">
												<h:inputText maxlength="19" styleClass="form-control" onblur="return isPhoneNumber(this);" onkeypress="return checkPhoneNumber(event);" value="#{surveillanceEmployeeDetails.employeeDetail.mobileNumber}" />
											</td>
											
										</tr>

										<tr>
											<th width="15%">#{msgs.label_homeDescription}</th>
											<td width="25%">
												<h:inputTextarea id="homeDescriptionId" styleClass="form-control" value="#{surveillanceEmployeeDetails.employeeDetail.homeDescription}" />
											</td>
											<td colspan="5"></td>
										</tr>

										<tr>
											<td colspan="8">
												<table width="100%">
													<tr>
														<td>
															<h:commandButton styleClass="btn btn-warning" value="#{msgs.label_insertRelative}" action="#{surveillanceEmployeeDetails.insertRelative()}">
																<f:ajax render="viewSurveillanceEmpForm:employeeRelativesListId" execute="viewSurveillanceEmpForm:employeeRelativesListId" />
															</h:commandButton>
														</td>
													</tr>

													<tr>
														<td>
															<p:dataTable reflow="true" tableStyle="table-layout: auto" paginator="true" style="width:100%;" id="employeeRelativesListId" rowIndexVar="index" rows="10" var="relativeRow" value="#{surveillanceEmployeeDetails.employeeRelativesList}" rowHover="true">
																<p:column styleClass='centerText'>
																	<f:facet name="header"> # </f:facet>
							                                    	#{index + 1}
			                                   					</p:column>

																<p:column styleClass='centerText'>
																	<f:facet name="header"> #{msgs.label_name} </f:facet>
																	<h:inputText id="classificationDescriptionId" value="#{relativeRow.fullName}" />
																</p:column>

																<p:column styleClass='centerText'>
																	<f:facet name="header">
																		#{msgs.label_job}
																	</f:facet>
																	<h:inputText styleClass="form-control" value="#{relativeRow.jobDescription}" />
																</p:column>

																<p:column styleClass='centerText'>
																	<f:facet name="header">
																		#{msgs.label_phoneNumber}
																	</f:facet>
																	<h:inputText maxlength="19" styleClass="form-control" onblur="return isPhoneNumber(this);" onkeypress="return checkPhoneNumber(event);" value="#{relativeRow.phoneNumber}" />
																</p:column>


																<p:column styleClass='centerText'>
																	<f:facet name="header">
																		<h:outputText value="#{msgs.label_delete}" />
																	</f:facet>
																	<h:commandButton value="&#xf00d;" styleClass="btn btn-trans-icon" action="#{surveillanceEmployeeDetails.deleteRelative(relativeRow)}" onclick="return confirm('#{msgs.q_delete}');">
																		<f:ajax render="viewSurveillanceEmpForm:employeeRelativesListId">
																		</f:ajax>
																	</h:commandButton>
																</p:column>
															</p:dataTable>
														</td>
													</tr>
												</table>
											</td>
										</tr>
									</table>
								</h:panelGroup>
							</td>
						</tr>

					</table>

					<table class="actionsSection" border="0" cellpadding="0" cellspacing="0">
						<tr>
							<td width="100%">
								<h:commandButton styleClass="btn btn-success" value="#{msgs.label_save}" action="#{surveillanceEmployeeDetails.saveDetails()}" onclick="return validateData();">
									<f:ajax execute="viewSurveillanceEmpForm:viewEmpDetailPaneId" onevent="function(e){if(e.status == 'complete') window.close();}"></f:ajax>
								</h:commandButton>
								<h:commandButton styleClass="btn btn-danger" value="#{msgs.label_cancel}" action="#{surveillanceEmployeeDetails.refreshSubmit()}">
									<f:ajax onevent="function(e){if(e.status == 'complete') window.close();}"></f:ajax>
								</h:commandButton>
							</td>
						</tr>
					</table>
				</td>
			</tr>
		</table>
	</h:form>
</h:body>
</html>