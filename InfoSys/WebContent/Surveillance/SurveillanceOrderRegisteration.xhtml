<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xmlns:code="http://java.sun.com/jsf/composite/code" xmlns:of="http://omnifaces.org/functions" xmlns:o="http://omnifaces.org/ui" xmlns:h="http://java.sun.com/jsf/html" xmlns:util="http://java.sun.com/jsf/composite/util" xmlns:p="http://primefaces.org/ui" xmlns:ui="http://java.sun.com/jsf/facelets" xmlns:f="http://java.sun.com/jsf/core">
<h:head>
	<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
	<h:outputStylesheet library="css" name="styles.css" />
	<h:outputStylesheet library="css" name="grid.css" />
	<h:outputStylesheet library="css" name="bootstrap.css" />

	<h:outputScript name="utilities.js" library="javascript" target="head" />

	<script type="text/javascript">
		function getNonEmployee() {
			openNonEmpsMiniSearch('#{request.contextPath}', 1);
			return false;
		}

		function releaseMask() {
			unMaskScreen();
		}

		function HandlePopupResult(ret) {
			unMaskScreen();
			if (ret != null) {
				document.getElementById('surveillanceOrderRegFormId:nonEmpIdId').value = ret[0];
				document.getElementById('surveillanceOrderRegFormId:nonEmpNameId').value = ret[1];
				document.getElementById('surveillanceOrderRegFormId:nonEmpIdentityId').value = ret[2];
				if (ret[6] != -1)
					document.getElementById('surveillanceOrderRegFormId:birthDateStrId').value = ret[6];
				if (ret[7] != -1)
					document.getElementById('surveillanceOrderRegFormId:birthDateGregStrId').value = ret[7];
				document.getElementById('surveillanceOrderRegFormId:addHiddenBtnId').click();
				return true;
			}
			return false;
		}

		function handleDownloadFiles(e) {
			openDownloadPopupFlagId = document.getElementById('surveillanceOrderRegFormId:openDownloadPopupFlagId').value;
			openDownloadDialogueFlagId = document.getElementById('surveillanceOrderRegFormId:openDownloadDialogueFlagId').value;

			if (e.status == 'success') {
				if (openDownloadPopupFlagId == 'true') {
					downloadFile();
				} else if (openDownloadDialogueFlagId == 'true') {
					PF('dlg').show();
				}
			}
		}

		function uploadFile() {
			fileArchivingParam = document.getElementById('surveillanceOrderRegFormId:fileArchivingParamId').value;
			openUploadFile('#{surveillanceOrderRegisteration.boolServerUploadPath}', fileArchivingParam);
			return false;
		}

		function downloadFile() {
			downloadedFileParamId = document.getElementById('surveillanceOrderRegFormId:downloadedFileParamId').value;
			openDownloadFile('#{surveillanceOrderRegisteration.boolServerDownloadPath}', downloadedFileParamId);
			return false;
		}

		function confirmDialog(data) {
			var showMsg = document.getElementById('surveillanceOrderRegFormId:showMsgHiddenId').value;
			if (data.status == 'success') {
				if (showMsg == 'true') {
					getNonEmployee();
				}
			}
			return true;
		}
	</script>

</h:head>
<h:body styleClass="screenBg">
	<h:form id="surveillanceOrderRegFormId" dir="#{msgs.dir}">
		<ui:decorate template="/Main/Template.xhtml">
			<table border="0" cellpadding="0" cellspacing="0" width="100%">


				<tr>
					<td class="screenTitle">
						<h:outputText rendered="#{surveillanceOrderRegisteration.pageMode == 1}" value="#{msgs.title_surveillanceOrderReg}" />
						<h:outputText rendered="#{surveillanceOrderRegisteration.pageMode != 1}" value="#{msgs.title_surveillanceOrderRegWf}" />
					</td>
				</tr>

				<tr>
					<td width="100%" height="5" />
				</tr>

				<tr>
					<td colspan="2">
						<table class="sectionTitle" border="0" cellpadding="0" cellspacing="0">
							<tr>
								<td>
									<h:outputText value="#{msgs.label_surveillanceOrderDetail}" />
								</td>
							</tr>
						</table>
					</td>
				</tr>

				<tr>
					<td width="100%" height="5" />
				</tr>

				<tr>
					<td>
						<h:panelGroup id="surveillanceContainerId">
							<table class="sectionContent" border="0" cellpadding="0" cellspacing="0">
								<tr>
									<th width="15%">
										#{msgs.label_orderNumber}
										<h:outputText rendered="#{surveillanceOrderRegisteration.pageMode == 1}" value="*" style="color:red;" />
									</th>
									<td width="20%">
										<h:panelGroup id="orderNumberPanelId">
											<h:inputText style="width:40%" disabled="#{surveillanceOrderRegisteration.pageMode == 2 or surveillanceOrderRegisteration.verbalOrderFlag}" styleClass="form-control" value="#{surveillanceOrderRegisteration.surveillanceOrderData.orderNumber}" maxlength="25" />
											<h:panelGroup rendered="#{surveillanceOrderRegisteration.pageMode == 1 or (empty surveillanceOrderRegisteration.surveillanceOrderData.orderNumber)}">
												<h:selectBooleanCheckbox style="margin:3%!important;" value="#{surveillanceOrderRegisteration.verbalOrderFlag}" disabled="#{surveillanceOrderRegisteration.pageMode == 2}">
													<f:ajax execute="@this" render="surveillanceOrderRegFormId:orderNumberPanelId" listener="#{surveillanceOrderRegisteration.resetOrderNumber()}" />
												</h:selectBooleanCheckbox>
												<h:outputText value="#{msgs.label_verbalOrder}" />
											</h:panelGroup>
											<h:inputHidden id="verbalOrderFlagValueId" value="#{surveillanceOrderRegisteration.verbalOrderFlag}" />
										</h:panelGroup>
									</td>


									<th width="15%">#{msgs.label_orderDate}</th>
									<td width="20%">
										<util:advancedHijriDate disable="#{surveillanceOrderRegisteration.pageMode == 2}" value="#{surveillanceOrderRegisteration.surveillanceOrderData.orderDate}" />
									</td>

								</tr>

								<tr>
									<th>#{msgs.label_departmentFinalApproval}</th>
									<td>
										<h:selectOneMenu disabled="#{surveillanceOrderRegisteration.pageMode == 2}" styleClass="form-control" value="#{surveillanceOrderRegisteration.surveillanceOrderData.finalApprovalEntity}">
											<f:selectItems value="#{surveillanceOrderRegisteration.finalApprovalList}" var="f" itemLabel="#{f.code}" itemValue="#{f.code}" />
										</h:selectOneMenu>
									</td>

								</tr>

								<tr>
									<th>#{msgs.label_orderPeriod}</th>
									<td>
										<h:inputText maxlength="2" disabled="#{surveillanceOrderRegisteration.pageMode == 2}" onkeypress="return checkDigit(event)" styleClass="inputWithIcon" value="#{surveillanceOrderRegisteration.surveillanceOrderData.periodMonths}" />
										#{msgs.label_month}
									</td>
									<th>#{msgs.label_surveillanceStartDate}</th>
									<td>
										<util:advancedHijriDate disable="#{surveillanceOrderRegisteration.pageMode == 2}" value="#{surveillanceOrderRegisteration.surveillanceOrderData.startDate}" />
									</td>

								</tr>

								<tr>
									<th>#{msgs.label_reportPeriod}</th>
									<td>
										<h:selectOneMenu disabled="#{surveillanceOrderRegisteration.pageMode == 2}" styleClass="selectMenuWithIcon" value="#{surveillanceOrderRegisteration.surveillanceOrderData.periodicReporting}">
											<f:selectItem itemValue="3" itemLabel="3" />
											<f:selectItem itemValue="4" itemLabel="4" />
											<f:selectItem itemValue="6" itemLabel="6" />
										</h:selectOneMenu>
										#{msgs.label_month}
									</td>
									<td colspan="1">
										<p:selectCheckboxMenu rendered="#{surveillanceOrderRegisteration.pageMode == 1}" styleClass="btn_normal" value="#{surveillanceOrderRegisteration.surveillanceOrderSelectedReasonsList}" label="#{msgs.label_surveillanceReasons}" filter="true" filterMatchMode="startsWith">
											<f:selectItems value="#{surveillanceOrderRegisteration.surveillanceOrderReasonsList}" var="reason" itemLabel="#{reason}" itemValue="#{reason}" />
										</p:selectCheckboxMenu>
									</td>

								</tr>

								<tr>
									<th>#{msgs.label_comment}</th>
									<td colspan="1">
										<h:inputTextarea maxlength="500" disabled="#{surveillanceOrderRegisteration.pageMode == 2}" styleClass="form-control" rows="4" cols="40" value="#{surveillanceOrderRegisteration.surveillanceOrderData.notes}" />
									</td>

								</tr>
							</table>
						</h:panelGroup>
					</td>
				</tr>

				<tr>
					<td width="100%" height="5" />
				</tr>

				<tr>
					<td colspan="2">
						<table class="actionsSection" border="0" cellpadding="0" cellspacing="0">
							<tr>
								<td width="100%">
									<h:commandButton rendered="#{(not empty surveillanceOrderRegisteration.surveillanceOrderData.id) and (surveillanceOrderRegisteration.pageMode ==1)}" styleClass="btn btn-success" id="archiveBtnUploadId" value="&#xf187; #{msgs.label_archiveDocuments}">
										<f:ajax listener="#{surveillanceOrderRegisteration.getUploadParam(surveillanceOrderRegisteration.surveillanceOrderData.id)}" render="surveillanceOrderRegFormId:fileArchivingParamId" onevent="function(e){if(e.status == 'success') return uploadFile();}" />
									</h:commandButton>

									<h:commandButton rendered="#{not empty surveillanceOrderRegisteration.surveillanceOrderData.id}" styleClass="btn btn-success" id="archiveBtnDownloadId" value="&#xf0c5; #{msgs.label_archiveDocumentsShow}">
										<f:ajax render="surveillanceOrderRegFormId:downloadDlgPanelId surveillanceOrderRegFormId:openDownloadDialogueFlagId surveillanceOrderRegFormId:openDownloadPopupFlagId surveillanceOrderRegFormId:downloadedFileParamId" listener="#{surveillanceOrderRegisteration.getDownloadedAttachmentsIdList(surveillanceOrderRegisteration.surveillanceOrderData.id)}" onevent="handleDownloadFiles" />
									</h:commandButton>
									<h:inputHidden id="fileArchivingParamId" value="#{surveillanceOrderRegisteration.fileArchivingParam}" />
									<h:inputHidden id="downloadedFileParamId" value="#{surveillanceOrderRegisteration.downloadFileParamId}" />
									<h:inputHidden id="openDownloadPopupFlagId" value="#{surveillanceOrderRegisteration.openDownloadPopupFlag}" />
									<h:inputHidden id="openDownloadDialogueFlagId" value="#{surveillanceOrderRegisteration.openDownloadDialogueFlag}" />
								</td>
							</tr>
						</table>
					</td>
				</tr>

				<tr>
					<td width="100%" height="5" />
				</tr>

				<tr>
					<td>
						<h:panelGroup id="surveillanceEmployeesPaneId">
							<table width="100%">
								<tr>
									<td colspan="3">
										<table class="sectionTitle" border="0" cellpadding="0" cellspacing="0">
											<tr>
												<td>
													<h:outputText value="#{msgs.label_observerDetails}" />
												</td>
											</tr>
										</table>
									</td>
								</tr>
								<tr>
									<th width="10%">
										<h:panelGroup rendered="#{surveillanceOrderRegisteration.pageMode != 2}">
											#{msgs.label_socialId}
											<h:outputText value="*" style="color:red;" />
										</h:panelGroup>
									</th>

									<td width="35%">
										<h:panelGroup id="addEmpNonEmpId" rendered="#{surveillanceOrderRegisteration.pageMode != 2}">
											<h:inputText id="socialId" styleClass="form-control inputnumber" value="#{surveillanceOrderRegisteration.socialId}" maxlength="10" onkeypress="return checkDigit(event)" />
											<h:commandButton styleClass="btn btn-warning" id="insertBtnId" value="#{msgs.label_add}" action="#{surveillanceOrderRegisteration.validateSocialId()}">
												<f:ajax render="surveillanceOrderRegFormId:addEmpNonEmpId surveillanceOrderRegFormId:surveillanceorderRegEmployeeId" execute="surveillanceOrderRegFormId:addEmpNonEmpId surveillanceOrderRegFormId:surveillanceorderRegEmployeeId surveillanceOrderRegFormId:surveillanceContainerId" onevent="confirmDialog" />
											</h:commandButton>
											<h:inputHidden value="#{surveillanceOrderRegisteration.showMsg}" id="showMsgHiddenId" />
											<h:inputHidden value="#{surveillanceOrderRegisteration.selectedNonEmp.id}" id="nonEmpIdId" />
											<h:inputHidden value="#{surveillanceOrderRegisteration.selectedNonEmp.fullName}" id="nonEmpNameId" />
											<h:inputHidden value="#{surveillanceOrderRegisteration.selectedNonEmp.identity}" id="nonEmpIdentityId" />
											<h:inputHidden value="#{surveillanceOrderRegisteration.selectedNonEmp.birthDateString}" id="birthDateStrId" />
											<h:inputHidden value="#{surveillanceOrderRegisteration.selectedNonEmp.birthDateGregString}" id="birthDateGregStrId" />
											<h:commandButton id="addHiddenBtnId" style="display:none;" action="#{surveillanceOrderRegisteration.addEmpNonEmp()}">
												<f:ajax execute="surveillanceOrderRegFormId:addEmpNonEmpId" render="surveillanceOrderRegFormId:addEmpNonEmpId surveillanceOrderRegFormId:surveillanceorderRegEmployeeId" />
											</h:commandButton>
										</h:panelGroup>
									</td>

									<td width="60%" />
								</tr>

								<tr>
									<td colspan="3" width="100%" height="5" />
								</tr>

								<tr>
									<td colspan="3">
										<p:dataTable tableStyle="table-layout:auto" reflow="true" liveResize="true" paginatorPosition="bottom" id="surveillanceorderRegEmployeeId" paginator="true" style="width:100%" rowIndexVar="index" rows="10" var="surveillanceEmpRow" value="#{surveillanceOrderRegisteration.surveillanceEmpNonEmpList}" rowHover="true">
											<p:column styleClass='centerText'>
												<f:facet name="header">
													#
												</f:facet>
		                                    	#{index + 1}
	                                   		</p:column>

											<p:column styleClass='centerText'>
												<f:facet name="header">
													#{msgs.label_name}
												</f:facet>
												<h:outputText value="#{surveillanceEmpRow.employeeFullName}" />
											</p:column>

											<p:column styleClass='centerText'>
												<f:facet name="header">
													#{msgs.label_socialNumber}
												</f:facet>
												<h:outputText value="#{surveillanceEmpRow.socialId}" />
											</p:column>

											<p:column styleClass='centerText'>
												<f:facet name="header"> 
													#{msgs.label_militaryNumber}
												</f:facet>
												<h:outputText value="#{surveillanceEmpRow.militaryNumber}" />
											</p:column>

											<p:column styleClass='centerText'>
												<f:facet name="header"> 
													#{msgs.label_rank}
												</f:facet>
												<h:outputText value="#{surveillanceEmpRow.rank}" />
											</p:column>

											<p:column styleClass='centerText'>
												<f:facet name="header"> 
													#{msgs.label_birthDate}
													<h:outputText rendered="#{surveillanceOrderRegisteration.pageMode == 1}" value="*" style="color:red;" />
												</f:facet>
												<h:outputText value="#{surveillanceEmpRow.birthDateString}" rendered="#{(surveillanceOrderRegisteration.selectedNonEmp == null) or (surveillanceOrderRegisteration.selectedNonEmp != null and surveillanceEmpRow.socialId.toString().startsWith('1') and (surveillanceEmpRow.birthDateString != null or not empty surveillanceEmpRow.birthDateString.trim()))}" />
												<h:outputText value="#{surveillanceEmpRow.birthDateGregString}" rendered="#{(surveillanceOrderRegisteration.selectedNonEmp != null) and surveillanceEmpRow.socialId.toString().startsWith('2') and (surveillanceEmpRow.birthDateGregString != null or not empty surveillanceEmpRow.birthDateGregString.trim())}" />
											</p:column>

											<p:column styleClass='centerText'>
												<f:facet name="header"> 
													#{msgs.label_periodDays}
													<h:outputText rendered="#{surveillanceOrderRegisteration.pageMode == 1}" value="*" style="color:red;" />
												</f:facet>
												<h:inputText maxlength="2" disabled="#{surveillanceOrderRegisteration.pageMode == 2}" value="#{surveillanceEmpRow.periodMonths}" onkeypress="return checkDigit(event)" />
											</p:column>

											<p:column styleClass='centerText'>
												<f:facet name="header"> 
													#{msgs.label_surveillanceReasons}
												</f:facet>
												<p:selectCheckboxMenu value="#{surveillanceEmpRow.surveillanceOrderReasonsList}" styleClass="btn_normal" label="#{msgs.label_reasons}" filter="true" filterMatchMode="startsWith">
													<f:selectItems itemDisabled="#{surveillanceOrderRegisteration.pageMode == 2}" value="#{surveillanceOrderRegisteration.surveillanceOrderReasonsList}" var="reason" itemLabel="#{reason}" itemValue="#{reason}" />
												</p:selectCheckboxMenu>
											</p:column>

											<p:column styleClass='centerText' rendered="#{surveillanceOrderRegisteration.pageMode == 1}">
												<f:facet name="header">
													<h:outputText value="#{msgs.label_delete}" />
												</f:facet>
												<h:commandButton value="&#xf00d;" styleClass="btn btn-trans-icon" action="#{surveillanceOrderRegisteration.deleteEmployee(surveillanceEmpRow)}" onclick="return confirm('#{msgs.q_delete}');">
													<f:ajax render="surveillanceOrderRegFormId:notifyMessagesId surveillanceOrderRegFormId:surveillanceEmployeesPaneId" execute="surveillanceOrderRegFormId:surveillanceEmployeesPaneId">
													</f:ajax>
												</h:commandButton>
											</p:column>

										</p:dataTable>
									</td>
								</tr>
							</table>
						</h:panelGroup>
					</td>
				</tr>

				<tr>
					<td width="100%" height="5" />
				</tr>

				<h:panelGroup rendered="#{not empty surveillanceOrderRegisteration.currentTask and surveillanceOrderRegisteration.role != 'Notification' and surveillanceOrderRegisteration.role != 'History' and surveillanceOrderRegisteration.pageMode != 1}">
					<tr>
						<td colspan="2">
							<table class="sectionTitle" border="0" cellpadding="0" cellspacing="0">
								<tr>
									<td>
										<h:outputText value="#{msgs.label_decisions}" />
									</td>
								</tr>
							</table>
						</td>
					</tr>

					<tr>
						<td width="100%" height="5" />
					</tr>
					<tr>
						<td>
							<table class="sectionContent" border="0" cellpadding="0" cellspacing="0">
								<tr>
									<th width="15%">#{msgs.label_comment}</th>
									<td width="20%">
										<h:inputTextarea id="taskNotesId" maxlength="500" styleClass="form-control" value="#{surveillanceOrderRegisteration.currentTask.notes}" rows="4" cols="40" />
									</td>
									<td width="65%"></td>
								</tr>
							</table>
						</td>
					</tr>
				</h:panelGroup>

				<tr>
					<td width="100%" height="5" />
				</tr>


				<tr>
					<td width="100%">
						<code:prevTasks rendered="#{not empty surveillanceOrderRegisteration.currentTask}" value="#{surveillanceOrderRegisteration.prevTasks}" />
					</td>
				</tr>


				<tr>
					<td width="100%" height="5" />
				</tr>

				<tr>
					<td>
						<table class="actionsSection" border="0" cellpadding="0" cellspacing="0">
							<tr>
								<td width="100%">
									<h:commandButton id="printBtnId" styleClass="btn btn-success" action="#{surveillanceOrderRegisteration.print()}" value="&#xf02f; #{msgs.label_print}" rendered="#{not empty surveillanceOrderRegisteration.surveillanceOrderData.id}" />
								</td>

								<td width="100%">
									<h:commandButton rendered="#{surveillanceOrderRegisteration.pageMode == 1 }" class="btn btn-success" value="&#xf0c7; #{msgs.label_save}" action="#{surveillanceOrderRegisteration.openDialogue(1)}">
										<f:ajax render="surveillanceOrderRegFormId:saveDlgPanelId" execute="surveillanceOrderRegFormId:surveillanceEmployeesPaneId surveillanceOrderRegFormId:surveillanceorderRegEmployeeId" onevent="function(e){if(e.status == 'success') PF('saveDlg').show();}" />
									</h:commandButton>
								</td>

								<td width="100%">
									<h:commandButton rendered="#{surveillanceOrderRegisteration.pageMode == 1}" class="btn btn-success" value="&#xf1d8; #{msgs.label_saveAndSend}" action="#{surveillanceOrderRegisteration.openDialogue(2)}">
										<f:ajax render="surveillanceOrderRegFormId:saveDlgPanelId" execute="surveillanceOrderRegFormId:surveillanceEmployeesPaneId surveillanceOrderRegFormId:surveillanceorderRegEmployeeId" onevent="function(e){if(e.status == 'success') PF('saveDlg').show();}" />
									</h:commandButton>
								</td>

								<td width="100%">
									<h:commandButton rendered="#{surveillanceOrderRegisteration.pageMode != 1 and surveillanceOrderRegisteration.role != 'Notification' and surveillanceOrderRegisteration.currentTask != null and surveillanceOrderRegisteration.role != 'History'}" class="btn btn-danger" value="&#xf00d; #{msgs.label_reject}" action="#{surveillanceOrderRegisteration.doReject()}" onclick="return confirm('#{msgs.q_reject}');">
										<f:ajax render="surveillanceOrderRegFormId:notifyMessagesId" execute="surveillanceOrderRegFormId:taskNotesId" />
									</h:commandButton>
								</td>

								<td width="100%">
									<h:commandButton rendered="#{surveillanceOrderRegisteration.pageMode != 1 and surveillanceOrderRegisteration.role != 'Notification' and surveillanceOrderRegisteration.currentTask != null and surveillanceOrderRegisteration.role != 'History'}" class="btn btn-success" value="&#xf00c; #{msgs.label_approve}" action="#{surveillanceOrderRegisteration.doApprove()}" onclick="return confirm('#{msgs.q_approve}');">
										<f:ajax render="surveillanceOrderRegFormId:notifyMessagesId" execute="surveillanceOrderRegFormId:taskNotesId" />
									</h:commandButton>
								</td>

								<td width="100%">
									<h:commandButton rendered="#{surveillanceOrderRegisteration.pageMode != 1 and surveillanceOrderRegisteration.role == 'Notification' and surveillanceOrderRegisteration.currentTask != null and surveillanceOrderRegisteration.role != 'History'}" class="btn btn-success" value="#{msgs.label_notified}" action="#{surveillanceOrderRegisteration.doNotified()}">
										<f:ajax render="surveillanceOrderRegFormId:notifyMessagesId" />
									</h:commandButton>
								</td>
							</tr>
						</table>
					</td>
				</tr>
			</table>

			<h:panelGroup id="downloadDlgPanelId">
				<p:dialog dir="#{msgs.dir}" header="#{msgs.label_archiveDocumentsShow}" id="dlgId" widgetVar="dlg" modal="true" height="180px;" width="720px">
					<h:panelGroup id="internalDlgPanelId">
						<table width="100%">
							<tr>
								<td>
									<p:dataTable tableStyle="table-layout:auto" reflow="true" liveResize="true" paginatorPosition="bottom" id="fileListIds" paginator="true" style="width:100%" rowIndexVar="index" rows="10" var="row" value="#{surveillanceOrderRegisteration.attachmentList}" rowHover="true">
										<p:column styleClass='centerText'>
											<f:facet name="header">#</f:facet>
		                                    #{index + 1}
	                                   	</p:column>
										<p:column styleClass='centerText'>
											<f:facet name="header">
													#{msgs.label_fileName}
												</f:facet>
											<h:outputText value="#{row.fileName}" />
										</p:column>
										<p:column styleClass='centerText'>
											<f:facet name="header">
												#{msgs.label_download}
											</f:facet>
											<h:commandButton styleClass="btn btn-success" value="&#xf019; #{msgs.label_download}">
												<f:ajax render="surveillanceOrderRegFormId:internalDlgPanelId surveillanceOrderRegFormId:downloadedFileParamId" listener="#{surveillanceOrderRegisteration.getDownloadParam(row.attachmentId)}" onevent="function(e){if(e.status == 'success') return downloadFile();}" />
											</h:commandButton>
										</p:column>
										<p:column styleClass='centerText' rendered="#{surveillanceOrderRegisteration.pageMode == 1}">
											<f:facet name="header">
												#{msgs.label_delete}
											</f:facet>
											<h:commandButton styleClass="btn btn-trans-icon" value="&#xf00d;">
												<f:ajax render="surveillanceOrderRegFormId:internalDlgPanelId surveillanceOrderRegFormId:downloadedFileParamId" listener="#{surveillanceOrderRegisteration.getDeleteParam(row)}" />
											</h:commandButton>
										</p:column>
									</p:dataTable>
								</td>
							</tr>
						</table>
					</h:panelGroup>
				</p:dialog>
			</h:panelGroup>

			<h:panelGroup id="saveDlgPanelId">
				<p:dialog dir="#{msgs.dir}" header="#{msgs.title_surveillanceOrderReg}" id="saveDlgId" widgetVar="saveDlg" modal="true" height="180px;" width="720px">
					<h:panelGroup id="internalSaveDlgPanelId">
						<table width="100%">
							<tr>
								<td>
									<h:outputText id="warningBirthDateId" value="#{surveillanceOrderRegisteration.warningAbsenceBirthDate}" />
								</td>
							</tr>
							<tr>
								<td>
									<h:outputText id="confirmDlgTextId" rendered="#{surveillanceOrderRegisteration.dialogueMode == 1}" value="#{msgs.q_save}" />
								</td>
							</tr>
							<tr>
								<td>
									<h:outputText id="saveDlgTextId" rendered="#{surveillanceOrderRegisteration.dialogueMode == 2}" value="#{msgs.q_confirm}" />
								</td>
							</tr>
						</table>
						<table class="actionsSection" border="0" cellpadding="0" cellspacing="0">
							<tr>
								<td colspan="2" height="20px"></td>
							</tr>

							<tr>

								<td width="100%">
									<h:commandButton rendered="#{surveillanceOrderRegisteration.dialogueMode == 1}" id="saveDlgBtnId" class="btn btn-success" value="&#xf0c7; #{msgs.label_save}" action="#{surveillanceOrderRegisteration.save()}">
										<f:ajax execute="surveillanceOrderRegFormId:surveillanceEmployeesPaneId surveillanceOrderRegFormId:surveillanceContainerId" onevent="function(e){if(e.status == 'complete') PF('saveDlg').hide(); return false;}" />
									</h:commandButton>
								</td>

								<td width="100%">
									<h:commandButton rendered="#{surveillanceOrderRegisteration.dialogueMode == 2}" id="saveAndSendDlgBtnId" class="btn btn-success" value="&#xf1d8; #{msgs.label_saveAndSend}" action="#{surveillanceOrderRegisteration.saveAndSend()}">
										<f:ajax execute="surveillanceOrderRegFormId:surveillanceEmployeesPaneId surveillanceOrderRegFormId:surveillanceContainerId" onevent="function(e){if(e.status == 'complete') PF('saveDlg').hide(); return false;}" />
									</h:commandButton>
								</td>

								<td width="100%">
									<h:commandButton styleClass="btn btn_normal" value="&#xf00d; #{msgs.label_cancel}">
										<f:ajax onevent="function(e){if(e.status == 'complete') PF('saveDlg').hide(); return false;}" render="surveillanceOrderRegFormId:saveDlgPanelId" />
									</h:commandButton>
								</td>
							</tr>
						</table>
					</h:panelGroup>
				</p:dialog>
			</h:panelGroup>
		</ui:decorate>
	</h:form>
</h:body>
</html>