<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xmlns:h="http://java.sun.com/jsf/html" xmlns:p="http://primefaces.org/ui" xmlns:ui="http://java.sun.com/jsf/facelets" xmlns:f="http://java.sun.com/jsf/core" xmlns:util="http://java.sun.com/jsf/composite/util">
<h:head>
	<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />

	<h:outputStylesheet library="css" name="styles.css" />
	<h:outputStylesheet library="css" name="grid.css" />
	<h:outputScript name="utilities.js" library="javascript" target="head" />
	<script type="text/javascript">
		function releaseMask() {
			unMaskScreen();
		}

		window.onkeypress = function(e) {
			var keyCode = window.event.keyCode || e.keyCode || e.which;
			if (keyCode == '13') {
				return false;
			}
		};
	</script>
</h:head>
<h:body styleClass="screenBg">
	<f:event type="preRenderComponent" listener="#{wfCollectiveInbox.init}" />
	<h:form id="wfCollectInboxForm" dir="#{msgs.dir}">
		<ui:decorate template="/Main/Template.xhtml">

			<table border="0" cellpadding="0" cellspacing="0" width="100%">


				<tr>
					<td class="screenTitle">
						<h:outputText value="#{wfCollectiveInbox.screenTitle}" />
					</td>
				</tr>

				<tr>
					<td width="100%" height="5" />
				</tr>

				<tr>
					<td>
						<table class="sectionContent" border="0" cellpadding="0" cellspacing="0">
							<tr>
								<th width="15%">
									<h:outputText value="#{msgs.label_searchBy}" />
								</th>
								<td width="40%">
									<h:selectOneMenu styleClass="form-control w-select-10" value="#{wfCollectiveInbox.selectedProcessGroupId}" disabled="true">
										<f:selectItem itemLabel="#{msgs.label_searchByModule}" itemValue="0" />
										<f:selectItems value="#{wfCollectiveInbox.processesGroups}" var="pG" itemLabel="#{pG.processGroupName}" itemValue="#{pG.processGroupId}" />
										<f:ajax event="change" listener="#{wfCollectiveInbox.searchProcesses}" execute="@this" render="notifyMessagesId processesId collectiveTasksId" />
									</h:selectOneMenu>
									<h:selectOneMenu styleClass="form-control w-select-60" id="processesId" value="#{wfCollectiveInbox.selectedProcessId}" disabled="true">
										<f:selectItem itemLabel="#{msgs.label_searchByProcess}" itemValue="-1" />
										<f:selectItems value="#{wfCollectiveInbox.processes}" var="p" itemLabel="#{p.processName}" itemValue="#{p.processId}" />
										<f:ajax event="change" listener="#{wfCollectiveInbox.searchCollectiveProcesses}" execute="@this" render="notifyMessagesId collectiveTasksId" />
									</h:selectOneMenu>
								</td>
								<td width="45%"></td>
							</tr>

						</table>
					</td>
				</tr>

				<tr>
					<td width="100%" height="15" />
				</tr>

				<tr>
					<td colspan="2">
						<table class="sectionTitle" border="0" cellpadding="0" cellspacing="0">
							<tr>
								<td>
									<h:outputText value="#{msgs.title_collectiveProcesses}" />
								</td>
							</tr>
						</table>
					</td>
				</tr>

				<tr>
					<td align="center" width="100%" class="tab-body">
						<p:dataTable tableStyle="table-layout:auto" styleClass="tab-inner-border" reflow="true" liveResize="true" paginator="true" id="collectiveTasksId" rowIndexVar="index" var="process" value="#{wfCollectiveInbox.collectiveProcesses}" rows="#{wfCollectiveInbox.pageSize}" rowHover="true">
							<p:column>
								<f:facet name="header">#</f:facet>
		                         #{index + 1}
							</p:column>
							<p:column>
								<f:facet name="header">
									<h:outputText value="#{msgs.label_process}" />
								</f:facet>
								<h:outputText value="#{process.label}" />
							</p:column>
							<p:column>
								<f:facet name="header">
									<h:outputText value="#{msgs.label_processesNumber}" />
								</f:facet>
								<h:outputText value="#{process.value}" />
							</p:column>
							<p:column>
								<f:facet name="header">
									<h:outputText value="#{msgs.label_makeProcess}" />
								</f:facet>
								<h:commandButton value="&#xf013;" styleClass="btn btn-trans-icon" action="#{wfCollectiveInbox.redirectToApprovalPage(index)}" onclick="this.form.target='_blank'" />
							</p:column>
						</p:dataTable>
					</td>
				</tr>
			</table>
		</ui:decorate>
	</h:form>
</h:body>
</html>