<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xmlns:h="http://java.sun.com/jsf/html" xmlns:p="http://primefaces.org/ui" xmlns:ui="http://java.sun.com/jsf/facelets" xmlns:f="http://java.sun.com/jsf/core" xmlns:util="http://java.sun.com/jsf/composite/util" xmlns:code="http://java.sun.com/jsf/composite/code">
<h:head>
	<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />

	<h:outputStylesheet library="css" name="styles.css" />
	<h:outputStylesheet library="css" name="grid.css" />
	<h:outputStylesheet library="css" name="bootstrap.css" />

	<h:outputScript name="utilities.js" library="javascript" target="head" />
	<script type="text/javascript">
		var m;
		function getDepartmentSrc(contextPath,mode){
			m=1;
			openDepartmentsMiniSearch(contextPath, mode);
			return false;
		}

		function getDepartmentDest(contextPath,mode){
			m=2;
			openDepartmentsMiniSearch(contextPath, mode);
			return false;
		}

		function getEmployeeWeapon(contextPath, mode){
			m=3;
    		openEmpsMiniSearch(contextPath, mode);
    		return false;
    	}

		function getEmployeeCars(contextPath,mode){
			m=4;
			empIds = document.getElementById('guardMissionRegisterationFormId:missionDetailsPanelId:employeekIDsId').value;
			openEmpsMiniSearchMultipleSelection(contextPath, mode,empIds);
    		return false;
    	}

		function getEmployeeEquipment(contextPath,mode,empIds){
			m=5;
			openEmpsMiniSearchMultipleSelection(contextPath, mode,empIds);
    		return false;
    	}
		
		function releaseMask(){
			unMaskScreen();
	   	}

		function handleDownloadFiles(e){
    		openDownloadPopupFlagId = document.getElementById('guardMissionRegisterationFormId:openDownloadPopupFlagId').value;
    		openDownloadDialogueFlagId = document.getElementById('guardMissionRegisterationFormId:openDownloadDialogueFlagId').value;
    		
    		if(e.status == 'success'){
    			if(openDownloadPopupFlagId == 'true'){
    				downloadFile();
        		}else if (openDownloadDialogueFlagId == 'true'){
        			PF('dlg').show();
            	}
    		}
        }

    	function uploadFile(){
    		fileArchivingParam = document.getElementById('guardMissionRegisterationFormId:fileArchivingParamId').value;
    		openUploadFile('#{securityGuardMissionRegisteration.boolServerUploadPath}', fileArchivingParam);
    		return false;
        }

    	function downloadFile(){
    		downloadedFileParamId = document.getElementById('guardMissionRegisterationFormId:downloadedFileParamId').value;
    		openDownloadFile('#{securityGuardMissionRegisteration.boolServerDownloadPath}',downloadedFileParamId);
    		return false;
        }
	   	
		function HandlePopupResult(ret) { 
    		unMaskScreen();
    		if(ret!=null){
        		if(m==1){
					document.getElementById('guardMissionRegisterationFormId:selectedSourceDepartmentId').value=ret[0];
		    		document.getElementById('guardMissionRegisterationFormId:selectedSourceDepartmentNameId').value=ret[1];
		    		document.getElementById('guardMissionRegisterationFormId:departmentOrderSourceNameId').innerHTML=ret[1];
	    	   		return true;
            	}
    			if(m==2){ 
	    			document.getElementById('guardMissionRegisterationFormId:selectedDepartmentId').value=ret[0];
	    			document.getElementById('guardMissionRegisterationFormId:selectedDepartmentNameId').value=ret[1];
	    			document.getElementById('guardMissionRegisterationFormId:departmentNameId').innerHTML=ret[1];
	    	   	    return true;
    			}
    			if(m==3){ 
		   	         document.getElementById('guardMissionRegisterationFormId:missionDetailsPanelId:selectedEmployeeForGunsId').value=ret[0];
		   	         document.getElementById('guardMissionRegisterationFormId:missionDetailsPanelId:selectedEmployeeForGunsNameId').value=ret[1];
		   	         document.getElementById('guardMissionRegisterationFormId:missionDetailsPanelId:selectedEmployeeForGunsMilitaryNumberId').value=ret[3];
		   	         document.getElementById('guardMissionRegisterationFormId:missionDetailsPanelId:selectedEmployeeForGunsRankId').value=ret[4];
	   	        	 document.getElementById('guardMissionRegisterationFormId:missionDetailsPanelId:insertNewWeaponRecord').click();
		   	         return true;
    			} else if(m==4){ 
		   	         document.getElementById('guardMissionRegisterationFormId:missionDetailsPanelId:selectedEmployeeForCarsId').value=ret[0];
		   	         document.getElementById('guardMissionRegisterationFormId:missionDetailsPanelId:selectedEmployeeForCarsNameId').value=ret[1];
		   	         document.getElementById('guardMissionRegisterationFormId:missionDetailsPanelId:selectedEmployeeForCarsMilitaryNumberId').value=ret[3];
		   	         document.getElementById('guardMissionRegisterationFormId:missionDetailsPanelId:selectedEmployeeForCarsRankId').value=ret[4];
	   	        	 document.getElementById('guardMissionRegisterationFormId:missionDetailsPanelId:insertNewCarsRecord').click();
		   	         return true;
    			}  else if(m==5){ 
		   	         document.getElementById('guardMissionRegisterationFormId:missionDetailsPanelId:selectedEmployeeForEquipmentId').value=ret[0];
		   	         document.getElementById('guardMissionRegisterationFormId:missionDetailsPanelId:selectedEmployeeForEquipmentNameId').value=ret[1];
		   	         document.getElementById('guardMissionRegisterationFormId:missionDetailsPanelId:selectedEmployeeForEquipmentMilitaryNumberId').value=ret[3];
		   	         document.getElementById('guardMissionRegisterationFormId:missionDetailsPanelId:selectedEmployeeForEquipmentRankId').value=ret[4];
	   	        	 document.getElementById('guardMissionRegisterationFormId:missionDetailsPanelId:insertNewEquipmentRecord').click();
		   	         return true;
    			}
	   		}
	   		return false;
    	}
    	
		function validateMandatoryData(){
			var verbalOrderFlagValue = document.getElementById("guardMissionRegisterationFormId:verbalOrderFlagValueId").value;
			var orderNumber = document.getElementById("guardMissionRegisterationFormId:orderNumberId").value;
			var orderSource = document.getElementById("guardMissionRegisterationFormId:selectedSourceDepartmentId").value;
			var missionPeriod = document.getElementById("guardMissionRegisterationFormId:missionPeriodId").value;
			var missionType = document.getElementById("guardMissionRegisterationFormId:missionTypeId").value;
			var selectedDepartmentId = document.getElementById("guardMissionRegisterationFormId:selectedDepartmentId").value;
			var missionPath = document.getElementById("guardMissionRegisterationFormId:missionPathId");
			var missionPathValue = document.getElementById("guardMissionRegisterationFormId:missionPathId").value;
			var remarks = document.getElementById("guardMissionRegisterationFormId:remarksId");
			
			var errorMsg;
			var successValidation = true;
	        if(verbalOrderFlagValue == 'false' &amp;&amp; (orderNumber == null || orderNumber=="")){
	            successValidation = false;
				errorMsg='#{msgs.error_orderNumberMandatory}';
	        }
	        else if(orderSource == null || orderSource==""){
	            successValidation = false;
				errorMsg='#{msgs.error_orderSourceMandatory}';
	        }
	        else if(missionPeriod == null || missionPeriod==""){
	            successValidation = false;
				errorMsg='#{msgs.error_missionPeriodMandatory}';
	        }
	        else if(missionType == null || missionType==""){
	            successValidation = false;
				errorMsg='#{msgs.error_missionTypeMandatory}';
	        }
	        else if(selectedDepartmentId == null || selectedDepartmentId==""){
	            successValidation = false;
				errorMsg='#{msgs.error_missionLocationMandatory}';
	        }
	        else if(missionPathValue == null || missionPathValue==""){
	            successValidation = false;
				errorMsg='#{msgs.error_missionPathMandatory}';
	        }
	        else if($(missionPath).val().length>500){
				successValidation = false;
				errorMsg='#{msgs.error_missionPathExceedMaxLength}';
			}
	        else if($(remarks).val().length>500){
				successValidation = false;
				errorMsg='#{msgs.error_remarksExceedMaxLength}';
			}
	        
			if(!successValidation){
				showErrorMessage(errorMsg);
	        }

	        if(successValidation){
				return confirm('#{msgs.q_confirm}');
			}else{
				return successValidation;
			}
		}

		function validateApproveReject(msg){
			var remarks = document.getElementById("guardMissionRegisterationFormId:commentsId");
			if($(remarks).val().length>500){
				showErrorMessage('#{msgs.error_remarksExceedMaxLength}');
				return false;
			}
			return confirm(msg);
		}
			
    </script>
</h:head>
<h:body styleClass="screenBg">
	<h:form id="guardMissionRegisterationFormId" dir="#{msgs.dir}">
		<ui:decorate template="/Main/Template.xhtml">

			<table border="0" cellpadding="0" cellspacing="0" width="100%">


				<tr>
					<td class="screenTitle">#{msgs.title_securityGuardMissionRegisteration}</td>
				</tr>

				<tr>
					<td width="100%" height="5" />
				</tr>

				<tr>
					<td colspan="2">
						<table class="sectionTitle" border="0" cellpadding="0" cellspacing="0">
							<tr>
								<td>
									<h:outputText value="#{msgs.label_missionOrderData}" />
								</td>
							</tr>
						</table>
					</td>
				</tr>

				<tr>
					<td width="100%" height="5" />
				</tr>

				<tr>
					<td>
						<h:panelGroup id="orderDataPnlId">
							<table class="sectionContent" border="0" cellpadding="0" cellspacing="0">
								<tr>
									<th width="15%">
										#{msgs.label_missionOrderNumber}
										<h:outputText value="*" style="color:red;" />
									</th>
									<td width="20%">
										<h:panelGroup id="orderNumberPanelId">
											<h:inputText style="width:40%" styleClass="form-control inputnumber" id="orderNumberId" value="#{securityGuardMissionRegisteration.missionGuard.orderNumber}" rendered="#{securityGuardMissionRegisteration.pageMode==1}" maxlength="20" disabled="#{securityGuardMissionRegisteration.verbalOrderFlag}" />
											<h:outputText style="width:40%" value="#{securityGuardMissionRegisteration.missionGuard.orderNumber}" rendered="#{(securityGuardMissionRegisteration.pageMode==2 or securityGuardMissionRegisteration.pageMode==3 ) and not empty securityGuardMissionRegisteration.missionGuard.orderNumber}" />
											<h:panelGroup rendered="#{securityGuardMissionRegisteration.pageMode == 1 or (empty securityGuardMissionRegisteration.missionGuard.orderNumber)}">
												<h:selectBooleanCheckbox style="margin:3%!important;" value="#{securityGuardMissionRegisteration.verbalOrderFlag}" disabled="#{securityGuardMissionRegisteration.pageMode == 2 or securityGuardMissionRegisteration.pageMode==3}">
													<f:ajax execute="@this" render="guardMissionRegisterationFormId:orderNumberPanelId" />
												</h:selectBooleanCheckbox>
												<h:outputText value="#{msgs.label_verbalOrder}" />
											</h:panelGroup>
											<h:inputHidden id="verbalOrderFlagValueId" value="#{securityGuardMissionRegisteration.verbalOrderFlag}" />
										</h:panelGroup>
									</td>

									<th width="15%">
										#{msgs.label_orderDate}
										<h:outputText value="*" style="color:red;" />
									</th>
									<td width="20%">
										<util:advancedHijriDate id="orderDateId" value="#{securityGuardMissionRegisteration.missionGuard.orderDate}" rendered="#{securityGuardMissionRegisteration.pageMode==1 }" />
										<h:outputText value="#{securityGuardMissionRegisteration.missionGuard.orderDateString}" rendered="#{securityGuardMissionRegisteration.pageMode==2 or securityGuardMissionRegisteration.pageMode==3 }" />
									</td>

								</tr>

								<tr>
									<th width="15%">
										#{msgs.label_orderSource}
										<h:outputText value="*" style="color:red;" />
									</th>
									<td width="20%">
										<h:selectOneMenu id="selectedSourceDepartmentId" disabled="#{securityGuardMissionRegisteration.pageMode!=1}" styleClass="form-control" value="#{securityGuardMissionRegisteration.missionGuard.orderSourceDomainId}">
											<f:selectItems value="#{securityGuardMissionRegisteration.orderSourcesList}" var="source" itemValue="#{source.id}" itemLabel="#{source.description}" />
										</h:selectOneMenu>
									</td>

									<th width="15%">#{msgs.label_missionNumber}</th>
									<td width="20%">
										<h:outputText value="#{securityGuardMissionRegisteration.missionGuard.missionNumber}" rendered="#{securityGuardMissionRegisteration.pageMode == 2 or securityGuardMissionRegisteration.pageMode == 3}" />
									</td>

								</tr>

								<tr>
									<th width="15%">
										#{msgs.label_missionPeriod}/#{msgs.label_day}
										<h:outputText value="*" style="color:red;" />
									</th>
									<td width="20%">
										<h:inputText maxlength="3" styleClass="form-control" id="missionPeriodId" value="#{securityGuardMissionRegisteration.missionGuard.missionPeriod}" onkeypress="return checkDigit(event);" onblur="return isDigitFloat(this);" rendered="#{securityGuardMissionRegisteration.pageMode==1}" />
										<h:outputText value="#{securityGuardMissionRegisteration.missionGuard.missionPeriod}" rendered="#{securityGuardMissionRegisteration.pageMode==2 or securityGuardMissionRegisteration.pageMode==3 }" />
									</td>


									<th width="15%">
										#{msgs.label_missionStartDate}
										<h:outputText value="*" style="color:red;" />
									</th>
									<td width="20%">
										<util:advancedHijriDate id="missionStartDateId" value="#{securityGuardMissionRegisteration.missionGuard.missionStartDate}" rendered="#{securityGuardMissionRegisteration.pageMode==1}" />
										<h:outputText value="#{securityGuardMissionRegisteration.missionGuard.missionStartDateString}" rendered="#{securityGuardMissionRegisteration.pageMode==2 or securityGuardMissionRegisteration.pageMode==3 }" />
									</td>

								</tr>

								<tr>
									<th width="15%">
										#{msgs.label_missionType}
										<h:outputText value="*" style="color:red;" />
									</th>
									<td width="20%">
										<h:selectOneMenu id="missionTypeId" styleClass="form-control" value="#{securityGuardMissionRegisteration.missionGuard.missionType}" rendered="#{securityGuardMissionRegisteration.pageMode==1}">
											<f:selectItems value="#{securityGuardMissionRegisteration.missionTypes}" var="type" itemLabel="#{type.description}" itemValue="#{type.id}" />
										</h:selectOneMenu>
										<h:outputText value="#{securityGuardMissionRegisteration.missionGuard.missionTypeDescription}" rendered="#{securityGuardMissionRegisteration.pageMode==2 or securityGuardMissionRegisteration.pageMode==3 }" />
									</td>


									<th width="15%">
										#{msgs.label_missionDepartment}
										<h:commandButton value="&#xf002;" styleClass="btn btn-trans-icon" onclick="return getDepartmentDest('#{request.contextPath}',1);" title="#{msgs.label_missionDepartment}" rendered="#{securityGuardMissionRegisteration.pageMode==1}" />
										<h:outputText value="*" style="color:red;" />
									</th>
									<td width="20%">
										<h:inputHidden id="selectedDepartmentId" value="#{securityGuardMissionRegisteration.missionGuard.departmentMissionLocationId}" />
										<h:inputHidden id="selectedDepartmentNameId" value="#{securityGuardMissionRegisteration.missionGuard.departmentMissionLocationName}" />
										<h:outputText id="departmentNameId" value="#{securityGuardMissionRegisteration.missionGuard.departmentMissionLocationName}" />
									</td>

								</tr>

								<tr>
									<th width="15%">
										#{msgs.label_missionPath}
										<h:outputText value="*" style="color:red;" />
									</th>
									<td width="20%">
										<h:inputTextarea id="missionPathId" styleClass="form-control" value="#{securityGuardMissionRegisteration.missionGuard.missionPath}" rendered="#{securityGuardMissionRegisteration.pageMode==1 }" />
										<h:inputTextarea disabled="true" styleClass="form-control" value="#{securityGuardMissionRegisteration.missionGuard.missionPath}" rendered="#{securityGuardMissionRegisteration.pageMode==2 or securityGuardMissionRegisteration.pageMode==3 }" />
									</td>


									<th width="15%">#{msgs.label_remarks}</th>
									<td width="20%">
										<h:inputTextarea id="remarksId" styleClass="form-control" value="#{securityGuardMissionRegisteration.missionGuard.remarks}" rendered="#{securityGuardMissionRegisteration.pageMode==1 }" />
										<h:inputTextarea disabled="true" styleClass="form-control" value="#{securityGuardMissionRegisteration.missionGuard.remarks}" rendered="#{securityGuardMissionRegisteration.pageMode==2 or securityGuardMissionRegisteration.pageMode==3 }" />
									</td>

								</tr>

								<tr>
									<th width="15%">
										#{msgs.label_movementDate}
										<h:outputText value="*" style="color:red;" />
									</th>
									<td width="20%">
										<util:advancedHijriDate id="movementDateId" value="#{securityGuardMissionRegisteration.missionGuard.movementDate}" rendered="#{securityGuardMissionRegisteration.pageMode==1}" />
										<h:outputText value="#{securityGuardMissionRegisteration.missionGuard.movementDateString}" rendered="#{securityGuardMissionRegisteration.pageMode==2 or securityGuardMissionRegisteration.pageMode==3 }" />
									</td>


									<th width="15%">
										#{msgs.label_movementTime}
										<h:outputText value="*" style="color:red;" />
									</th>
									<td width="20%">
										<p:watermark for="movementTimeId" value="xx:xx" id="watermarkMovementTimeId" />
										<h:inputText id="movementTimeId" styleClass="form-control" onblur="return valdiateTime(event,this.id);" value="#{securityGuardMissionRegisteration.missionGuard.movementTime}" rendered="#{securityGuardMissionRegisteration.pageMode==1 }" />
										<h:inputText disabled="true" styleClass="form-control" value="#{securityGuardMissionRegisteration.missionGuard.movementTime}" rendered="#{securityGuardMissionRegisteration.pageMode==2 or securityGuardMissionRegisteration.pageMode==3 }" />
									</td>

								</tr>

								<tr>

									<th width="15%">
										#{msgs.label_endmissionTime}
										<h:outputText value="*" style="color:red;" />
									</th>
									<td width="20%">
										<p:watermark for="endmissionTimeId" value="xx:xx" id="watermarkEndMissionTimeId" />
										<h:inputText id="endmissionTimeId" styleClass="form-control" onblur="return valdiateTime(event,this.id);" value="#{securityGuardMissionRegisteration.missionGuard.missionEndTime}" rendered="#{securityGuardMissionRegisteration.pageMode==1 }" />
										<h:inputText disabled="true" styleClass="form-control" value="#{securityGuardMissionRegisteration.missionGuard.missionEndTime}" rendered="#{securityGuardMissionRegisteration.pageMode==2 or securityGuardMissionRegisteration.pageMode==3 }" />
									</td>

								</tr>

							</table>
						</h:panelGroup>
					</td>
				</tr>

				<tr>
					<td width="100%" height="5" />
				</tr>

				<tr>
					<td colspan="2">
						<table class="actionsSection" border="0" cellpadding="0" cellspacing="0">
							<tr>
								<td width="100%">
									<h:commandButton rendered="#{not empty securityGuardMissionRegisteration.missionGuard.id}" styleClass="btn btn-success" id="archiveBtnUploadId" value="&#xf187; #{msgs.label_archiveDocuments}">
										<f:ajax listener="#{securityGuardMissionRegisteration.getUploadParam(securityGuardMissionRegisteration.missionGuard.id)}" render="guardMissionRegisterationFormId:fileArchivingParamId" onevent="function(e){if(e.status == 'success') return uploadFile();}" />
									</h:commandButton>

									<h:commandButton rendered="#{not empty securityGuardMissionRegisteration.missionGuard.id}" styleClass="btn btn-success" id="archiveBtnDownloadId" value="&#xf0c5; #{msgs.label_archiveDocumentsShow}">
										<f:ajax render="guardMissionRegisterationFormId:downloadDlgPanelId guardMissionRegisterationFormId:openDownloadDialogueFlagId guardMissionRegisterationFormId:openDownloadPopupFlagId guardMissionRegisterationFormId:downloadedFileParamId" listener="#{securityGuardMissionRegisteration.getDownloadedAttachmentsIdList(securityGuardMissionRegisteration.missionGuard.id)}" onevent="handleDownloadFiles" />
									</h:commandButton>
									<h:inputHidden id="fileArchivingParamId" value="#{securityGuardMissionRegisteration.fileArchivingParam}" />
									<h:inputHidden id="downloadedFileParamId" value="#{securityGuardMissionRegisteration.downloadFileParamId}" />
									<h:inputHidden id="openDownloadPopupFlagId" value="#{securityGuardMissionRegisteration.openDownloadPopupFlag}" />
									<h:inputHidden id="openDownloadDialogueFlagId" value="#{securityGuardMissionRegisteration.openDownloadDialogueFlag}" />
								</td>
							</tr>
						</table>
					</td>
				</tr>

				<tr>
					<td width="100%" height="5" />
				</tr>

				<tr>
					<td colspan="8">
						<p:accordionPanel id="missionDetailsPanelId" activeIndex="-1">
							<p:tab title="#{msgs.label_employeesAndGunsData}">
								<h:panelGroup>
									<h:inputHidden id="selectedEmployeeForGunsId" value="#{securityGuardMissionRegisteration.selectedEmployeeForWeapons}" />
									<h:inputHidden id="selectedEmployeeForGunsNameId" value="#{securityGuardMissionRegisteration.selectedEmployeeForWeaponsName}" />
									<h:inputHidden id="selectedEmployeeForGunsMilitaryNumberId" value="#{securityGuardMissionRegisteration.selectedEmployeeForWeaponsMilitaryNumber}" />
									<h:inputHidden id="selectedEmployeeForGunsRankId" value="#{securityGuardMissionRegisteration.selectedEmployeeForWeaponsRank}" />
									<h:inputHidden id="employeekIDsId" value="#{securityGuardMissionRegisteration.employeeIdsList}" />
									<h:commandButton id="insertNewWeaponRecord" style="display:none;" action="#{securityGuardMissionRegisteration.addEmployee(1)}">
										<f:ajax execute="guardMissionRegisterationFormId:missionDetailsPanelId" render="guardMissionRegisterationFormId:missionDetailsPanelId" />
									</h:commandButton>
									<table width="100%" border="0" cellpadding="0" cellspacing="0">
										<tr>
											<td width="100%">
												<h:commandButton rendered="#{securityGuardMissionRegisteration.pageMode==1}" class="btn btn-warning" onclick="return getEmployeeWeapon('#{request.contextPath}',1);" value="#{msgs.label_addEmployeeWeapon}" />
											</td>
										</tr>
										<tr>
											<td>
												<table width="100%">
													<tr>
														<td>
															<p:dataTable tableStyle="table-layout:auto" reflow="true" liveResize="true" paginatorPosition="bottom" id="weaponsList" paginator="true" style="width:100%" rowIndexVar="index" rows="10" var="weapon" value="#{securityGuardMissionRegisteration.missionWeaponList}" rowHover="true">
																<p:column styleClass='centerText'>
																	<f:facet name="header">
																						#
																					</f:facet>
											                                    	#{index + 1}
										                                   		</p:column>

																<p:column styleClass='centerText'>
																	<f:facet name="header">
																						#{msgs.label_employeeName}
																					</f:facet>
																	<h:outputText value="#{weapon.employeeName}" />
																</p:column>

																<p:column styleClass='centerText'>
																	<f:facet name="header"> 
																						#{msgs.label_rank}
																					</f:facet>
																	<h:outputText value="#{weapon.employeeRank}" />
																</p:column>

																<p:column styleClass='centerText'>
																	<f:facet name="header"> 
																						#{msgs.label_militaryNumber}
																					</f:facet>
																	<h:outputText value="#{weapon.employeeMilitaryNumber}" />
																</p:column>

																<p:column styleClass='centerText'>
																	<f:facet name="header"> 
																						#{msgs.label_weaponType}
																						<h:outputText value="*" style="color:red;" />
																	</f:facet>
																	<h:selectOneMenu styleClass="form-control" value="#{weapon.domainWeaponTypeId}" rendered="#{securityGuardMissionRegisteration.pageMode==1}">

																		<f:selectItems value="#{securityGuardMissionRegisteration.weaponTypes}" var="type" itemLabel="#{type.description}" itemValue="#{type.id}" />
																	</h:selectOneMenu>
																	<h:outputText value="#{weapon.domainWeaponTypeDescription}" rendered="#{securityGuardMissionRegisteration.pageMode==2 or securityGuardMissionRegisteration.pageMode==3 }" />
																</p:column>

																<p:column styleClass='centerText'>
																	<f:facet name="header"> 
																						#{msgs.label_weaponNumber}
																						<h:outputText value="*" style="color:red;" />
																	</f:facet>
																	<h:inputText maxlength="255" styleClass="form-control" value="#{weapon.weaponNumber}" onkeypress="return checkDigit(event);" onblur="return isDigitFloat(this);" rendered="#{securityGuardMissionRegisteration.pageMode==1 }" />
																	<h:outputText value="#{weapon.weaponNumber}" rendered="#{securityGuardMissionRegisteration.pageMode==2 or securityGuardMissionRegisteration.pageMode==3 }" />
																</p:column>

																<p:column styleClass='centerText'>
																	<f:facet name="header"> 
																						#{msgs.label_ammunitionAmount}
																						<h:outputText value="*" style="color:red;" />
																	</f:facet>
																	<h:inputText maxlength="5" styleClass="form-control" value="#{weapon.ammoAmount}" onkeypress="return checkDigit(event);" onblur="return isDigitFloat(this);" rendered="#{securityGuardMissionRegisteration.pageMode==1 }" />
																	<h:outputText value="#{weapon.ammoAmount}" rendered="#{securityGuardMissionRegisteration.pageMode==2 or securityGuardMissionRegisteration.pageMode==3 }" />
																</p:column>

																<p:column styleClass='centerText' rendered="#{securityGuardMissionRegisteration.pageMode==1 }">
																	<f:facet name="header">
																		<h:outputText value="#{msgs.label_delete}" />
																	</f:facet>
																	<h:commandButton rendered="#{securityGuardMissionRegisteration.pageMode==1 }" value="&#xf00d;" styleClass="btn btn-trans-icon" action="#{securityGuardMissionRegisteration.confirmDeleteEmployee(weapon)}">
																		<f:ajax render="guardMissionRegisterationFormId:deleteDlgPanelId" execute="guardMissionRegisterationFormId:missionDetailsPanelId" onevent="function(e){if(e.status == 'success') PF('deleteDlg').show();}">
																		</f:ajax>
																	</h:commandButton>

																</p:column>

															</p:dataTable>
														</td>
													</tr>
												</table>
											</td>
										</tr>
									</table>
								</h:panelGroup>
							</p:tab>
							<p:tab title="#{msgs.label_missionCarsData}">
								<h:panelGroup>
									<h:inputHidden id="selectedEmployeeForCarsId" value="#{securityGuardMissionRegisteration.selectedEmployeeForCars}" />
									<h:inputHidden id="selectedEmployeeForCarsNameId" value="#{securityGuardMissionRegisteration.selectedEmployeeForCarsName}" />
									<h:inputHidden id="selectedEmployeeForCarsMilitaryNumberId" value="#{securityGuardMissionRegisteration.selectedEmployeeForCarsMilitaryNumber}" />
									<h:inputHidden id="selectedEmployeeForCarsRankId" value="#{securityGuardMissionRegisteration.selectedEmployeeForCarsRank}" />
									<h:commandButton id="insertNewCarsRecord" style="display:none;" action="#{securityGuardMissionRegisteration.addEmployee(2)}">
										<f:ajax execute="guardMissionRegisterationFormId:missionDetailsPanelId" render="guardMissionRegisterationFormId:missionDetailsPanelId:carsList">
										</f:ajax>
									</h:commandButton>
									<table width="100%" border="0" cellpadding="0" cellspacing="0">
										<tr>
											<td width="100%">
												<h:commandButton rendered="#{securityGuardMissionRegisteration.pageMode==1 }" class="btn btn-warning" onclick="return getEmployeeCars('#{request.contextPath}',6);" value="#{msgs.label_addEmployeeCar}" style="width:20%" />
											</td>
										</tr>
										<tr>
											<td>
												<table width="100%">
													<tr>
														<td>
															<p:dataTable tableStyle="table-layout:auto" reflow="true" liveResize="true" paginatorPosition="bottom" id="carsList" paginator="true" style="width:100%" rowIndexVar="index" rows="10" var="car" value="#{securityGuardMissionRegisteration.missionCarList}" rowHover="true">
																<p:column styleClass='centerText'>
																	<f:facet name="header">
																						#
																					</f:facet>
											                                    	#{index + 1}
										                                   		</p:column>

																<p:column styleClass='centerText'>
																	<f:facet name="header">
																						#{msgs.label_employeeName}
																					</f:facet>
																	<h:outputText value="#{car.employeeName}" />
																</p:column>

																<p:column styleClass='centerText'>
																	<f:facet name="header"> 
																						#{msgs.label_rank}
																					</f:facet>
																	<h:outputText value="#{car.employeeRank}" />
																</p:column>

																<p:column styleClass='centerText'>
																	<f:facet name="header"> 
																						#{msgs.label_militaryNumber}
																					</f:facet>
																	<h:outputText value="#{car.employeeMilitaryNumber}" />
																</p:column>

																<p:column styleClass='centerText'>
																	<f:facet name="header"> 
																						#{msgs.label_carModel}
																						<h:outputText value="*" style="color:red;" />
																	</f:facet>
																	<h:selectOneMenu rendered="#{securityGuardMissionRegisteration.pageMode==1}" styleClass="form-control" value="#{car.domainCarModelId}">
																		<f:selectItems value="#{securityGuardMissionRegisteration.carModels}" var="type" itemLabel="#{type.description}" itemValue="#{type.id}" />
																	</h:selectOneMenu>
																	<h:outputText value="#{car.domainCarModelDescription}" rendered="#{securityGuardMissionRegisteration.pageMode==2 or securityGuardMissionRegisteration.pageMode==3 }" />
																</p:column>

																<p:column styleClass='centerText'>
																	<f:facet name="header"> 
																						#{msgs.label_carSpecificationModel}
																						<h:outputText value="*" style="color:red;" />
																	</f:facet>
																	<h:inputText maxlength="20" rendered="#{securityGuardMissionRegisteration.pageMode==1}" styleClass="form-control" value="#{car.carModel}" />
																	<h:outputText rendered="#{securityGuardMissionRegisteration.pageMode==2 or securityGuardMissionRegisteration.pageMode==3 }" value="#{car.carModel}" />
																</p:column>

																<p:column styleClass='centerText'>
																	<f:facet name="header"> 
																						#{msgs.label_plateNumber}
																						<h:outputText value="*" style="color:red;" />
																	</f:facet>
																	<h:inputText maxlength="20" rendered="#{securityGuardMissionRegisteration.pageMode==1}" styleClass="form-control" value="#{car.plateNumber}" />
																	<h:outputText rendered="#{securityGuardMissionRegisteration.pageMode==2 or securityGuardMissionRegisteration.pageMode==3 }" value="#{car.plateNumber}" />
																</p:column>

																<p:column styleClass='centerText'>
																	<f:facet name="header"> 
																						#{msgs.label_borderGuardsNumber}
																						<h:outputText value="*" style="color:red;" />
																	</f:facet>
																	<h:inputText maxlength="50" rendered="#{securityGuardMissionRegisteration.pageMode==1}" styleClass="form-control" value="#{car.borderGuardNumber}" onkeypress="return checkDigit(event);" onblur="return isDigitFloat(this);" />
																	<h:outputText value="#{car.borderGuardNumber}" rendered="#{securityGuardMissionRegisteration.pageMode==2 or securityGuardMissionRegisteration.pageMode==3 }" />
																</p:column>

																<p:column styleClass='centerText' rendered="#{securityGuardMissionRegisteration.pageMode==1 }">
																	<f:facet name="header">
																		<h:outputText value="#{msgs.label_delete}" />
																	</f:facet>
																	<h:commandButton rendered="#{securityGuardMissionRegisteration.pageMode==1 }" value="&#xf00d;" styleClass="btn btn-trans-icon" action="#{securityGuardMissionRegisteration.deleteFromList(car,null)}" onclick="return confirm('#{msgs.q_delete}');">
																		<f:ajax render="guardMissionRegisterationFormId:notifyMessagesId guardMissionRegisterationFormId:missionDetailsPanelId" execute="guardMissionRegisterationFormId:missionDetailsPanelId">
																		</f:ajax>
																	</h:commandButton>
																</p:column>

															</p:dataTable>
														</td>
													</tr>
												</table>
											</td>
										</tr>
									</table>
								</h:panelGroup>
							</p:tab>
							<p:tab title="#{msgs.label_missionEquipmentData}">
								<h:panelGroup>
									<h:inputHidden id="selectedEmployeeForEquipmentId" value="#{securityGuardMissionRegisteration.selectedEmployeeForEquipment}" />
									<h:inputHidden id="selectedEmployeeForEquipmentNameId" value="#{securityGuardMissionRegisteration.selectedEmployeeForEquipmentName}" />
									<h:inputHidden id="selectedEmployeeForEquipmentMilitaryNumberId" value="#{securityGuardMissionRegisteration.selectedEmployeeForEquipmentMilitaryNumber}" />
									<h:inputHidden id="selectedEmployeeForEquipmentRankId" value="#{securityGuardMissionRegisteration.selectedEmployeeForEquipmentRank}" />
									<h:commandButton id="insertNewEquipmentRecord" style="display:none;" action="#{securityGuardMissionRegisteration.addEmployee(3)}">
										<f:ajax execute="guardMissionRegisterationFormId:missionDetailsPanelId" render="guardMissionRegisterationFormId:missionDetailsPanelId:equipmentList">
										</f:ajax>
									</h:commandButton>
									<table width="100%" border="0" cellpadding="0" cellspacing="0">
										<tr>
											<td width="100%">
												<h:commandButton rendered="#{securityGuardMissionRegisteration.pageMode==1 }" class="btn btn-warning" onclick="return getEmployeeEquipment('#{request.contextPath}',6,'#{securityGuardMissionRegisteration.employeeIdsList}');" value="#{msgs.label_addEmployeeEquipment}" style="width:20%" />
											</td>
										</tr>
										<tr>
											<td>
												<table width="100%">
													<tr>
														<td>
															<p:dataTable tableStyle="table-layout:auto" reflow="true" liveResize="true" paginatorPosition="bottom" id="equipmentList" paginator="true" style="width:100%" rowIndexVar="index" rows="10" var="equipment" value="#{securityGuardMissionRegisteration.missionEquipmentList}" rowHover="true">
																<p:column styleClass='centerText'>
																	<f:facet name="header">
																						#
																					</f:facet>
											                                    	#{index + 1}
										                                   		</p:column>

																<p:column styleClass='centerText'>
																	<f:facet name="header">
																						#{msgs.label_employeeName}
																					</f:facet>
																	<h:outputText value="#{equipment.employeeName}" />
																</p:column>

																<p:column styleClass='centerText'>
																	<f:facet name="header"> 
																						#{msgs.label_rank}
																					</f:facet>
																	<h:outputText value="#{equipment.employeeRank}" />
																</p:column>

																<p:column styleClass='centerText'>
																	<f:facet name="header"> 
																						#{msgs.label_militaryNumber}
																					</f:facet>
																	<h:outputText value="#{equipment.employeeMilitaryNumber}" />
																</p:column>

																<p:column styleClass='centerText'>
																	<f:facet name="header"> 
																						#{msgs.label_equipmentType}
																						<h:outputText value="*" style="color:red;" />
																	</f:facet>
																	<h:selectOneMenu rendered="#{securityGuardMissionRegisteration.pageMode==1 }" styleClass="form-control" value="#{equipment.domainEquipmentTypeId}">
																		<f:selectItems value="#{securityGuardMissionRegisteration.equipmentTypes}" var="type" itemLabel="#{type.description}" itemValue="#{type.id}" />
																	</h:selectOneMenu>
																	<h:outputText rendered="#{securityGuardMissionRegisteration.pageMode==2 or securityGuardMissionRegisteration.pageMode==3 }" value="#{equipment.domainEquipmentTypeDescription}" />
																</p:column>

																<p:column styleClass='centerText'>
																	<f:facet name="header"> 
																						#{msgs.label_mobileNumber}
																						<h:outputText value="*" style="color:red;" />
																	</f:facet>
																	<h:inputText maxlength="20" rendered="#{securityGuardMissionRegisteration.pageMode==1 }" styleClass="form-control" value="#{equipment.equipmentModel}" onkeypress="return checkDigit(event);" />
																	<h:outputText rendered="#{securityGuardMissionRegisteration.pageMode==2 or securityGuardMissionRegisteration.pageMode==3 }" value="#{equipment.equipmentModel}" />
																</p:column>

																<p:column styleClass='centerText'>
																	<f:facet name="header"> 
																						#{msgs.label_borderGuardsNumber}
																						<h:outputText value="*" style="color:red;" />
																	</f:facet>
																	<h:inputText maxlength="50" rendered="#{securityGuardMissionRegisteration.pageMode==1 }" styleClass="form-control" value="#{equipment.borderGuardNumber}" onkeypress="return checkDigit(event);" onblur="return isDigitFloat(this);" />
																	<h:outputText rendered="#{securityGuardMissionRegisteration.pageMode==2 or securityGuardMissionRegisteration.pageMode==3 }" value="#{equipment.borderGuardNumber}" />
																</p:column>

																<p:column styleClass='centerText' rendered="#{securityGuardMissionRegisteration.pageMode==1 }">
																	<f:facet name="header">
																		<h:outputText value="#{msgs.label_delete}" />
																	</f:facet>
																	<h:commandButton rendered="#{securityGuardMissionRegisteration.pageMode==1 }" value="&#xf00d;" styleClass="btn btn-trans-icon" action="#{securityGuardMissionRegisteration.deleteFromList(null,equipment)}" onclick="return confirm('#{msgs.q_delete}');">
																		<f:ajax render="guardMissionRegisterationFormId:notifyMessagesId guardMissionRegisterationFormId:missionDetailsPanelId" execute="guardMissionRegisterationFormId:missionDetailsPanelId">
																		</f:ajax>
																	</h:commandButton>
																</p:column>
															</p:dataTable>
														</td>
													</tr>
												</table>
											</td>
										</tr>
									</table>
								</h:panelGroup>
							</p:tab>
						</p:accordionPanel>
					</td>
				</tr>
				<tr>
					<td>
						<h:panelGroup rendered="#{ (not empty securityGuardMissionRegisteration.currentTask)}">
							<tr>
								<td colspan="2">
									<table class="sectionContent" border="0" cellpadding="0" cellspacing="0">
										<tr>
											<th>
												<h:outputText value="#{msgs.label_comment}" />
											</th>
											<td>
												<h:inputTextarea id="commentsId" value="#{securityGuardMissionRegisteration.currentTask.notes}" rows="5" cols="80" disabled="#{securityGuardMissionRegisteration.role==securityGuardMissionRegisteration.historicalRole}" />
											</td>
										</tr>
									</table>
								</td>
							</tr>
						</h:panelGroup>
					</td>
				</tr>
				<tr>
					<td width="100%" height="5" />
				</tr>

				<tr>
					<td>
						<h:panelGroup rendered="#{empty securityGuardMissionRegisteration.missionGuard.id}">
							<table class="sectionContent" border="0" cellpadding="0" cellspacing="0">
								<tr>
									<th width="15%">#{msgs.label_attachmendUploadQuestion}</th>
									<td width="70%">
										<h:selectOneRadio id="uploadFlagId" value="#{securityGuardMissionRegisteration.uploadFlag}">
											<f:selectItem itemValue="#{msgs.label_yes}" itemLabel="#{msgs.label_yes}" />
											<f:selectItem itemValue="#{msgs.label_no}" itemLabel="#{msgs.label_no}" />
										</h:selectOneRadio>
									</td>
								</tr>
							</table>
						</h:panelGroup>
					</td>
				</tr>

				<tr>
					<td width="100%" height="5" />
				</tr>

				<tr>
					<td width="100%">
						<code:prevTasks rendered="#{ not empty securityGuardMissionRegisteration.currentTask}" value="#{securityGuardMissionRegisteration.prevTasks}" />
					</td>
				</tr>
				<tr>
					<td height="20"></td>
				</tr>
				<tr>
					<td>
						<table class="actionsSection" border="0" cellpadding="0" cellspacing="0">
							<tr>
								<td width="100%">
									<h:commandButton id="printBtnId" styleClass="btn btn-success" action="#{securityGuardMissionRegisteration.print()}" value="&#xf02f; #{msgs.label_print}" rendered="#{not empty securityGuardMissionRegisteration.missionGuard.id}" />
									<h:commandButton rendered="#{securityGuardMissionRegisteration.role == securityGuardMissionRegisteration.directorateMilitaryPoliceManagerRole || securityGuardMissionRegisteration.role == securityGuardMissionRegisteration.regionMilitaryPoliceManagerRole}" styleClass="btn btn-danger" id="rejectBtnId" value="&#xf00d; #{msgs.label_reject}" action="#{securityGuardMissionRegisteration.reject}" onclick="return validateApproveReject('#{msgs.q_reject}');">
									</h:commandButton>
									<h:commandButton rendered="#{securityGuardMissionRegisteration.role == securityGuardMissionRegisteration.directorateMilitaryPoliceManagerRole || securityGuardMissionRegisteration.role == securityGuardMissionRegisteration.regionMilitaryPoliceManagerRole}" styleClass="btn btn-success" id="approveBtnId" value="&#xf058; #{msgs.label_approve}" action="#{securityGuardMissionRegisteration.approve}" onclick="return validateApproveReject('#{msgs.q_approve}');">
									</h:commandButton>
									<h:commandButton rendered="#{securityGuardMissionRegisteration.role == securityGuardMissionRegisteration.notificationRole}" styleClass="btn btn-success" id="notifiedBtnId" value="#{msgs.label_notified}" action="#{securityGuardMissionRegisteration.notified}">
									</h:commandButton>
									<h:commandButton rendered="#{securityGuardMissionRegisteration.pageMode==1}" styleClass="btn btn-success" id="saveBtnId" value="&#xf1d8; #{msgs.label_saveAndSend}" action="#{securityGuardMissionRegisteration.saveNewMissionGuard}" onclick="return validateMandatoryData();">
									</h:commandButton>
								</td>
							</tr>
						</table>
					</td>
				</tr>

			</table>
			<h:panelGroup id="downloadDlgPanelId">
				<p:dialog dir="#{msgs.dir}" header="#{msgs.label_archiveDocumentsShow}" id="dlgId" widgetVar="dlg" modal="true" height="180px;" width="720px">
					<h:panelGroup id="internalDlgPanelId" rendered="#{securityGuardMissionRegisteration.attachmentList.size() > 1}">
						<table width="100%">
							<tr>
								<td>
									<p:dataTable tableStyle="table-layout:auto" reflow="true" liveResize="true" paginatorPosition="bottom" id="fileListIds" paginator="true" style="width:100%" rowIndexVar="index" rows="10" var="row" value="#{securityGuardMissionRegisteration.attachmentList}" rowHover="true">
										<p:column styleClass='centerText'>
											<f:facet name="header">#</f:facet>
		                                    #{index + 1}
	                                   	</p:column>
										<p:column styleClass='centerText'>
											<f:facet name="header">
													#{msgs.label_fileName}
												</f:facet>
											<h:outputText value="#{row.fileName}" />
										</p:column>
										<p:column styleClass='centerText'>
											<f:facet name="header">
												#{msgs.label_download}
											</f:facet>
											<h:commandButton styleClass="btn btn-success" value="&#xf019; #{msgs.label_download}">
												<f:ajax render="guardMissionRegisterationFormId:internalDlgPanelId guardMissionRegisterationFormId:downloadedFileParamId" listener="#{securityGuardMissionRegisteration.getDownloadParam(row.attachmentId)}" onevent="function(e){if(e.status == 'success') return downloadFile();}" />
											</h:commandButton>
										</p:column>
										<p:column styleClass='centerText' rendered="#{securityGuardMissionRegisteration.deletePrivilage}">
											<f:facet name="header">
												#{msgs.label_delete}
											</f:facet>
											<h:commandButton styleClass="btn btn-trans-icon" value="&#xf00d;">
												<f:ajax render="guardMissionRegisterationFormId:internalDlgPanelId guardMissionRegisterationFormId:downloadedFileParamId" listener="#{securityGuardMissionRegisteration.deleteAttachment(row)}" />
											</h:commandButton>
										</p:column>
									</p:dataTable>
								</td>
							</tr>
						</table>
					</h:panelGroup>
				</p:dialog>
			</h:panelGroup>
			<h:panelGroup id="deleteDlgPanelId">
				<p:dialog dir="#{msgs.dir}" header="#{msgs.title_deleteEmployee}" id="deleteDlgId" widgetVar="deleteDlg" modal="true" height="180px;" width="720px">
					<h:panelGroup id="internalDeleteDlgPanelId">
						<table width="100%">
							<tr>
								<td>
									<h:outputText id="warningCarOrEquipmentId" rendered="#{securityGuardMissionRegisteration.missionCarDataToDelete.employeeId != null or securityGuardMissionRegisteration.missionEquipmentDataToDelete.employeeId != null}" value="#{msgs.label_warningEmployeeHasCarOrEquipment}" />
								</td>
							</tr>
							<tr>
								<td>
									<h:outputText id="confirmDlgTextId" value="#{msgs.q_delete}" />
								</td>
							</tr>
						</table>
						<table class="actionsSection" border="0" cellpadding="0" cellspacing="0">
							<tr>
								<td colspan="2" height="20px"></td>
							</tr>

							<tr>

								<td width="100%">
									<h:commandButton id="deleteDlgBtnId" class="btn btn-success" value="&#xf0c7; #{msgs.label_delete}" action="#{securityGuardMissionRegisteration.deleteFromList(null,null)}">
										<f:ajax execute="guardMissionRegisterationFormId:missionDetailsPanelId" render="guardMissionRegisterationFormId:missionDetailsPanelId" onevent="function(e){if(e.status == 'complete') PF('deleteDlg').hide(); return false;}" />
									</h:commandButton>
								</td>

								<td width="100%">
									<h:commandButton styleClass="btn btn_normal" value="&#xf00d; #{msgs.label_cancel}" action="#{securityGuardMissionRegisteration.cancelDeletion()}">
										<f:ajax onevent="function(e){if(e.status == 'complete') PF('deleteDlg').hide(); return false;}" render="guardMissionRegisterationFormId:deleteDlgPanelId" />
									</h:commandButton>
								</td>
							</tr>
						</table>
					</h:panelGroup>
				</p:dialog>
			</h:panelGroup>
		</ui:decorate>
	</h:form>
	<h:inputHidden value="#{msgs.error_mandatory}" id="mandatoryErrorId" />
</h:body>
</html>