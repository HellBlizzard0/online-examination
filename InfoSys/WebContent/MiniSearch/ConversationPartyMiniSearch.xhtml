<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xmlns:h="http://java.sun.com/jsf/html" xmlns:p="http://primefaces.org/ui" xmlns:f="http://java.sun.com/jsf/core" xmlns:ui="http://java.sun.com/jsf/facelets">
<h:head>
	<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
	<h:outputStylesheet library="css" name="styles.css" />
	<h:outputStylesheet library="css" name="grid.css" />
	<h:outputStylesheet library="css" name="bootstrap.css" />
	<h:outputScript name="utilities.js" library="javascript" target="head" />
	<script type="text/javascript">
		function selectParty() {
			var convPartyContactNumberId = document.getElementById('searchPartyForm:convPartyContactNumberId').value;
			var convPartyContactNameId = document.getElementById('searchPartyForm:convPartyContactNameId').value;
			var followUpCodeId = document.getElementById('searchPartyForm:followUpCodeId').value;
			var networkRolesId = document.getElementById('searchPartyForm:networkRolesId').value;
			var networkRolesDescId = document.getElementById('searchPartyForm:networkRolesDescId').value;

			/* <![CDATA[ */
			if (convPartyContactNameId == null || convPartyContactNameId == "" || convPartyContactNameId == null || convPartyContactNameId == "") {
				showErrorMessage('#{msgs.error_mandatory}');
				return false;
			} else {

				returnVal = new Array();
				returnVal[0] = convPartyContactNumberId;
				returnVal[1] = convPartyContactNameId;
				returnVal[2] = followUpCodeId;
				returnVal[3] = networkRolesId;
				returnVal[4] = networkRolesDescId;
				window.returnValue = returnVal;

				window.opener.HandlePopupResult(returnVal);
				window.close();
				return true;
			}
			/* ]]> */
		}

		function releaseMask() {
			unMaskScreen();
		}
		window.onunload = unloadPage;
		function unloadPage() {
			window.opener.releaseMask();

		}
	</script>
</h:head>

<h:body styleClass="screenBg" onunload="unloadPage();">
	<h:form id="searchPartyForm" dir="#{msgs.dir}">
		<ui:decorate template="/Main/TemplateMiniSearch.xhtml">
			<table border="0" cellpadding="0" cellspacing="3" width="100%" class="bgcolor-pup">
				<tr>
					<td width="100%" height="5" />
				</tr>

				<tr>
					<td class="screenTitle">
						<h:outputText value="#{msgs.title_insertConversationParty}" />
					</td>
				</tr>

				<tr>
					<td width="100%" height="5" />
				</tr>
				<tr>
					<td width="100%">
						<h:panelGroup id="convPartySectionPanelId">
							<table class="sectionContent" border="0" cellpadding="0" cellspacing="0">
								<tr>
									<th width="15%">
										<h:outputText value="#{msgs.label_conversationPartyContactNumber}" />
									</th>
									<td width="35%">
										<h:inputText id="convPartyContactNumberId" maxlength="15" styleClass="form-control" value="#{conversationPartyMiniSearch.conversationPartyData.contactNumber}"  />
									</td>

									<td>
										<h:commandButton styleClass="btn btn-default" value="&#xf002; #{msgs.label_dataRetrieval}" action="#{conversationPartyMiniSearch.retriveParties()}">
											<f:ajax execute="searchPartyForm:convPartyContactNumberId" render="searchPartyForm:convPartySectionPanelId"></f:ajax>
										</h:commandButton>
									</td>
									<td></td>
								</tr>
								<tr>
									<th width="15%">
										<h:outputText value="#{msgs.label_conversationPartyName}" />
										<h:outputText value="*" style="color:red;" />
									</th>
									<td width="20%">
										<h:inputText disabled="#{not conversationPartyMiniSearch.enable}" id="convPartyContactNameId" styleClass="form-control" value="#{conversationPartyMiniSearch.conversationPartyData.name}" />
									</td>
									<td width="15%"></td>
									<td width="80%"></td>
								</tr>
								<tr>
									<th width="15%">
										<h:outputText value="#{msgs.label_followUpCode}" />
									</th>
									<td width="20%">
										<h:inputText disabled="true" styleClass="form-control" value="#{conversationPartyMiniSearch.conversationPartyData.followUpCode}" />
										<h:inputHidden id="followUpCodeId" value="#{conversationPartyMiniSearch.conversationPartyData.followUpCode}"></h:inputHidden>
									</td>
									<td width="15%"></td>
									<td width="65%"></td>
								</tr>
								<tr>
									<th width="15%">
										<h:outputText value="#{msgs.label_NetworkRole}" />
									</th>
									<td width="20%">
										<h:selectOneMenu disabled="#{not conversationPartyMiniSearch.enable}" id="NetworkRoleId" style="width:25%;" value="#{conversationPartyMiniSearch.conversationPartyData.domainIdNetworkRoles}">
											<f:selectItem itemValue="#{null}" itemLabel=" " />
											<f:selectItems value="#{conversationPartyMiniSearch.networkRoleList}" var="network" itemLabel="#{network.description}" itemValue="#{network.id}" />
											<f:ajax event="change" render="searchPartyForm:convPartySectionPanelId" execute="searchPartyForm:NetworkRoleId" listener="#{conversationPartyMiniSearch.collectNetworkDescription()}" />
										</h:selectOneMenu>
										<h:inputHidden id="networkRolesId" value="#{conversationPartyMiniSearch.conversationPartyData.domainIdNetworkRoles}" />
										<h:inputHidden id="networkRolesDescId" value="#{conversationPartyMiniSearch.conversationPartyData.domainIdNetworkRolesDesc}" />
									</td>
									<td width="15%"></td>
									<td width="65%"></td>
								</tr>
							</table>
						</h:panelGroup>
					</td>
				</tr>
				<tr>
					<td>
						<table class="actionsSection" border="0" cellpadding="0" cellspacing="0" width="100%">
							<tr>
								<td>
									<h:commandButton styleClass="btn btn-default btn-reset" id="returnBtn" value="#{msgs.label_goBack}" onclick="window.close();">
									</h:commandButton>
									<h:commandButton id="addBtnId" styleClass="btn btn-default" value="#{msgs.label_insert}" onclick="return selectParty();">
									</h:commandButton>
								</td>
							</tr>
						</table>
					</td>
				</tr>
			</table>
		</ui:decorate>
	</h:form>
</h:body>
</html>
