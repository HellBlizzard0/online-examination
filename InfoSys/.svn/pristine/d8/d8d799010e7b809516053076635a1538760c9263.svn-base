<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xmlns:h="http://java.sun.com/jsf/html" xmlns:p="http://primefaces.org/ui" xmlns:f="http://java.sun.com/jsf/core" xmlns:ui="http://java.sun.com/jsf/facelets">
<h:head>
	<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
	<h:outputStylesheet library="css" name="styles.css" />
	<h:outputStylesheet library="css" name="grid.css" />
	<h:outputStylesheet library="css" name="bootstrap.css" />
	<h:outputScript name="utilities.js" library="javascript" target="head" />
	<script type="text/javascript">
		window.onkeypress = function(e) {
			var keyCode = window.event.keyCode || e.keyCode || e.which;
			if (keyCode == '13') {
				document.getElementById('searchInfoForm:searchInfoBtnID').click();
				return false;
			}
		};

		function back() {
			window.close();
		}

		function selectInfo(callerId) {
			var idTokens = callerId.split(':');
			var infoId = document.getElementById('searchInfoForm:infoListDataTableId:' + idTokens[2] + ':infoId').value;
			var infoNumber = document.getElementById('searchInfoForm:infoListDataTableId:' + idTokens[2] + ':infoNumberId').innerHTML;
			returnVal = new Array();
			returnVal[0] = infoId;
			returnVal[1] = infoNumber;
			window.returnValue = returnVal;

			window.opener.HandlePopupResult(returnVal);
			window.close();
		}

		window.onunload = unloadPage;
		function unloadPage() {
			window.opener.releaseMask();
		}
	</script>
</h:head>
<h:body styleClass="screenBg" onunload="unloadPage();">
	<h:form id="searchInfoForm" dir="#{msgs.dir}">
		<ui:decorate template="/Main/TemplateMiniSearch.xhtml">
			<table border="0" cellpadding="0" cellspacing="0" width="100%" class="bgcolor-pup">

				<tr>
					<td width="100%" height="5" />
				</tr>
				<tr>
					<td class="screenTitle">
						<h:outputFormat value="#{msgs.title_followUpResultHistory}">
							<f:param value="#{followUpResultMiniSearch.selectedFollowUpData.code}" />
							<f:param value="#{followUpResultMiniSearch.selectedFollowUpData.followUpStartDateString}" />
							<f:param value="#{followUpResultMiniSearch.selectedFollowUpData.followUpEndDateString}" />
						</h:outputFormat>
					</td>
				</tr>
				<tr>
					<td width="100%" height="5" />
				</tr>
				<tr>
					<td width="100%;" colspan="6">
						<h:panelGroup>
							<table width="100%">
								<tr>
									<td colspan="2">
										<table class="sectionTitle" border="0" cellpadding="0" cellspacing="0">
											<tr>
												<td>
													<h:outputText value="#{msgs.title_followUpResult}" />
												</td>
											</tr>
											<tr>
												<td colspan="2"></td>
											</tr>
										</table>
									</td>
								</tr>
							</table>
						</h:panelGroup>
					</td>
				</tr>

				<tr>
					<td width="100%">
						<h:panelGroup id="infoListId">
							<p:dataTable var="result" value="#{followUpResultMiniSearch.followUpResultData}" widgetVar="followUpResults" emptyMessage="#{msgs.title_emptyFollowUpResults}" paginator="true" rowHover="true" reflow="true" filteredValue="#{followUpResultMiniSearch.filteredFollowUpResultData}">
								<p:column style="text-align: center;">
									<f:facet name="header"> # </f:facet>
	                                #{index + 1}
	                            </p:column>

								<p:column filterBy="#{result.domainIdFollowResultsDesc}" headerText="#{msgs.label_type}" filterMatchMode="exact">
									<f:facet name="filter">
										<p:selectOneMenu onchange="PF('followUpResults').filter()" style="width:100%">
											<f:selectItem itemLabel="#{msgs.label_all}" itemValue="#{null}" noSelectionOption="true" />
											<f:selectItems var="resultType" itemLabel="#{resultType.description}" itemValue="#{resultType.description}" value="#{followUpResultMiniSearch.followUpResultTypesList}" />
										</p:selectOneMenu>
									</f:facet>
									<h:outputText value="#{result.domainIdFollowResultsDesc}" style="width:100%" />
								</p:column>

								<p:column filterBy="#{result.resultDateString} #{result.resultTime}" headerText="#{msgs.label_ResultDateAndTime}" filterMatchMode="contains">
									<h:outputText value="#{result.resultDateString} #{result.resultTime}" />
								</p:column>

								<p:column filterBy="#{result.domainIdTransTypeDesc}" headerText="#{msgs.label_followUpResultTrans}" filterMatchMode="exact">
									<f:facet name="filter">
										<p:selectOneMenu onchange="PF('followUpResults').filter()" style="width:100%">
											<f:selectItem itemLabel="#{msgs.label_all}" itemValue="#{null}" noSelectionOption="true" />
											<f:selectItems var="resultType" itemLabel="#{resultType.description}" itemValue="#{resultType.description}" value="#{followUpResultMiniSearch.followUpTransTypesList}" />
										</p:selectOneMenu>
									</f:facet>
									<h:outputText value="#{result.domainIdTransTypeDesc}" style="width:100%" />
								</p:column>

								<p:column filterBy="#{result.domainIdResultRegionDesc}" headerText="#{msgs.label_followUpResultRegion}" filterMatchMode="exact">
									<f:facet name="filter">
										<p:selectOneMenu onchange="PF('followUpResults').filter()" style="width:100%">
											<f:selectItem itemLabel="#{msgs.label_all}" itemValue="#{null}" noSelectionOption="true" />
											<f:selectItems var="resultType" itemLabel="#{resultType.regionName}" itemValue="#{resultType.regionName}" value="#{followUpResultMiniSearch.followUpResultRegionList}" />
										</p:selectOneMenu>
									</f:facet>
									<h:outputText value="#{result.domainIdResultRegionDesc}" style="width:100%" />
								</p:column>

								<p:column filterBy="#{result.resultDetails}" headerText="#{msgs.label_followUpResultDetails}" filterMatchMode="contains">
									<h:outputText value="#{result.resultDetails}" />
								</p:column>

							</p:dataTable>
						</h:panelGroup>
					</td>
				</tr>

				<tr>
					<td width="100%" height="5">
						<h:commandButton onclick="back(); return false;" title="#{msgs.label_goBack}" value="#{msgs.label_goBack}" />
					</td>
				</tr>
			</table>
		</ui:decorate>
	</h:form>
</h:body>
</html>