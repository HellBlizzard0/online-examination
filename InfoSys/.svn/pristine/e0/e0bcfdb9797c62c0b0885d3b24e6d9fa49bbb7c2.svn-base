<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xmlns:h="http://java.sun.com/jsf/html" xmlns:f="http://java.sun.com/jsf/core" xmlns:prime="http://primefaces.org/ui">
<h:head>
	<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
	<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no" />

	<h:outputStylesheet library="css" rendered="#{msgs.dir == 'ltr'}" name="English-style.css" />
	<h:outputStylesheet library="css" rendered="#{msgs.dir == 'rtl'}" name="styles.css" />
	<h:outputScript name="utilities.js" library="javascript" target="head" />
	<script type="text/javascript">
		function initPage() {
			var userName = document.getElementById('loginForm:userNameId');
			userName.focus();
		}

		function validateData() {
			var mode = document.getElementById('loginForm:modeHiddenId').value;
			if (mode == 1) {
				var userName = document.getElementById('loginForm:userNameId').value;
				var password = document.getElementById('loginForm:passwordId').value;
				if (userName == null || userName == '' || password == null
						|| password == '') {
					showErrorMessage(document
							.getElementById('namePasswordMandatoryId').value);
					return false;
				}
			} else if (mode == 2) {
				var miToken = document.getElementById('loginForm:tokenId').value;
				if (miToken == null || miToken == '') {
					showErrorMessage(document
							.getElementById('miTokenMandtoryId').value);
					return false;
				}
			}
			return true;
		}

		function loginEnter(event) {
			if (event.which == 13 || event.keyCode == 13) {
				document.getElementById('loginForm:loginButton').click();
				event.preventDefault();
				return false;
			}
			return true;
		};
	</script>
</h:head>

<h:body styleClass="bg-login" onload="initPage();">
	<f:event type="preRenderComponent" listener="#{login.init}" />
	<prime:growl showDetail="true" autoUpdate="true" id="notifyMessagesId" widgetVar="notifyMessagesWVId" />
	<h:form id="loginForm" dir="#{msgs.dir}">
		<prime:ajaxStatus onstart="PF('reload').show();" onsuccess="PF('reload').hide();" />
		<prime:dialog id="reload" widgetVar="reload" modal="true" showHeader="false" resizable="false" closable="false" styleClass="preloader">
			<h:graphicImage value="/resources/images/01-progress.gif" alt="ai" />
		</prime:dialog>

		<!-- BEGIN LOGIN -->

		<div id="login">
			<!-- BEGIN LOGIN FORM -->

			<!-- BEGIN LOGO -->

			<div class="col-md-4 col-sm-4 col-xs-12 padding-none back-logo-login-color ">
				<div class="logo-pagelogin">
					<img src="../resources/images/logo.png" alt="logo" class="center" />
					<h3 class="textlogo-login">#{msgs.label_slogan}</h3>
				</div>
			</div>

			<!-- END LOGO -->

			<div class="col-md-8 col-sm-7 col-xs-12  padding-none ">
				<div class="col-md-8">
					<h4 class="text-log">الدخول</h4>
				</div>

				<div class="col-md-11">
					<div class="errorMessage">
						<h:outputText id="errorMessageId" value="#{login.serverSideErrorMessages}" />
					</div>
					
					<div class="input-prepend">
						<h:panelGroup rendered="#{login.mode == 1}">
							<span class="add-on">
								<i class="fa fa-user"></i>
							</span>
							<h:inputText placeholder="#{msgs.label_userName}" id="userNameId" onkeypress="loginEnter(event);" value="#{login.username}" styleClass="input-login placeholder-password-username" type="text placeholder" />
						</h:panelGroup>
					</div>
					<div class="input-prepend">
						<h:panelGroup rendered="#{login.mode == 1}">
							<span class="add-on">
								<i class="fa fa-unlock-alt"></i>
							</span>
							<h:inputSecret id="passwordId" onkeypress="loginEnter(event);" value="#{login.password}" styleClass="input-login placeholder-password-username" type="text placeholder"></h:inputSecret>
						</h:panelGroup>
					</div>

					<h:panelGroup rendered="#{login.mode == 2}">
						<div class="">
							<span class="add-on">
								<i class="fa fa-key"></i>
							</span>

							<h:inputText placeholder="#{msgs.label_token}" id="tokenId" onkeypress="loginEnter(event);" value="#{login.token}" styleClass="input-login placeholder-password-username" type="text placeholder" />

						</div>
					</h:panelGroup>
					
					<div class="fix-btn">
						<span class="btn-span btn-span-orange-login l-r-left">
							<h:commandButton onclick="return validateData();" id="loginButton" action="#{login.login}" value=" &#xf08b; #{msgs.label_login}" styleClass="btn btn-trans">
								<f:ajax render="errorMessageId @form" execute="@form" />
							</h:commandButton>

						</span>
					</div>
					<div class="clearfix space5"></div>
					<div class="kindly-massage-loginpage">#{msgs.label_login_note1}</div>
				</div>
				<!-- END LOGIN FORM -->
			</div>
		</div>
		<!-- BEGIN COPYRIGHT -->

		<div class="footer col-md-12">
			<div>#{login.copyRightMessage}</div>
			<div>#{msgs.label_version}</div>
		</div>
		<h:inputHidden id="modeHiddenId" value="#{login.mode}" />
	</h:form>
	<h:inputHidden id="namePasswordMandatoryId" value="#{msgs.error_userNameAndPasswordMandatory}" />
	<h:inputHidden id="miTokenMandtoryId" value="#{msgs.error_miTokenMandtoryId}" />
</h:body>
</html>