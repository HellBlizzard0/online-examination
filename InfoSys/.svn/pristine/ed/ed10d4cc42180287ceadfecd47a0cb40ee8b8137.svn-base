<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xmlns:h="http://java.sun.com/jsf/html" xmlns:p="http://primefaces.org/ui" xmlns:ui="http://java.sun.com/jsf/facelets" xmlns:f="http://java.sun.com/jsf/core" xmlns:util="http://java.sun.com/jsf/composite/util">
<h:head>
	<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />

	<h:outputStylesheet library="css" name="styles.css" />
	<h:outputStylesheet library="css" name="grid.css" />
	<h:outputStylesheet library="css" name="bootstrap.css" />

	<h:outputScript name="utilities.js" library="javascript" target="head" />

	<script type="text/javascript">
		var m;
		function getOpenSource(contextPath){
			m = 0;
			openOpenSourcesMiniSearch(contextPath, 1);
	 		return false;
	 	}
	 	
		 function getWorkflow(contextPath, instanceId){
             openWorkflowRepresentation(contextPath, 1, instanceId);
	      }
	      
  	 	 function getAssignments(contextPath) {
  			m = 2;
  			openAssignmentsMiniSearch(contextPath,5);
  			return false;
  		}
		
		function getDepartment(contextPath){
			m = 3;
			openDepartmentsMiniSearch(contextPath, 1, null, null);
			return false;
		}

		function getCountry(contextPath){
			m = 4;
			openCountriesMiniSearch(contextPath, 1);
			return false;
		}
		
		function getEmployee(contextPath){
			m = 5;
			openEmpsMiniSearch(contextPath, 1);
			return false;
		}
		
		function getDomain(contextPath,classes){
			m = 6;
			openDomainsMiniSearch(contextPath, 2 ,classes);
			return false;
		}
		
		function getNonEmployee(contextPath){
			m = 7;
			openNonEmpsMiniSearch(contextPath, 1);
			return false;
		}
		
	  	function getUnit(contextPath) {
			m = 8;
			sectorId = document.getElementById('infoSearchFormId:selectedSectorId').value;
			sectorIds = document.getElementById('infoSearchFormId:sectorIdsId').value;
			openDepartmentsMiniSearch(contextPath,6,sectorId == '' || sectorId == null ? sectorIds : sectorId, null);
			return false;
		}
		
    	function releaseMask(){
    		unMaskScreen();
       	}
       	
		function HandlePopupResult(ret) {
		   	unMaskScreen();
			if(ret!=null){ 
				if(m == 0){
					document.getElementById('infoSearchFormId:selectedOpenSourceIdId').value=ret[0];
		         	document.getElementById('infoSearchFormId:selectedOpenSourceNameId').innerHTML=ret[1];
				}else if(m == 2){
		         	document.getElementById('infoSearchFormId:selectedAssignmentIdId').value=ret[0];
					document.getElementById('infoSearchFormId:selectedAssignmentCodeId').innerHTML=ret[2];
				}else if(m == 3){
		         	document.getElementById('infoSearchFormId:selectedDepartmentIdId').value=ret[0];
					document.getElementById('infoSearchFormId:selectedDepartmentNameId').innerHTML=ret[1];
				}else if(m == 4){
		         	document.getElementById('infoSearchFormId:selectedCountryIdId').value=ret[0];
					document.getElementById('infoSearchFormId:selectedCountryNameId').innerHTML=ret[1];
				}else if(m == 5){
		         	document.getElementById('infoSearchFormId:selectedEmployeeIdId').value=ret[0];
					document.getElementById('infoSearchFormId:selectedEmployeeNameId').innerHTML=ret[1];
				}else if(m == 6){
		         	document.getElementById('infoSearchFormId:selectedDomainIdId').value=ret[0];
					document.getElementById('infoSearchFormId:selectedDomainNameId').innerHTML=ret[1];
				}else if(m == 7){
		         	document.getElementById('infoSearchFormId:selectedNonEmpIdId').value=ret[0];
					document.getElementById('infoSearchFormId:selectedNonEmpNameId').innerHTML=ret[1];
				} else if (m==8)
		  		{
		  			document.getElementById('infoSearchFormId:selectedUnitId').value = ret[0];
	        		document.getElementById('infoSearchFormId:selectedUnitNameId').value = ret[1];
	                document.getElementById('infoSearchFormId:unitNameId').innerHTML = ret[1];
		  		}
		        return true;
			}
			return false;
		}
		
		  function resetUnit(){
			  document.getElementById('infoSearchFormId:selectedUnitId').value = null;
	  		  document.getElementById('infoSearchFormId:selectedUnitNameId').value = '';
	          document.getElementById('infoSearchFormId:unitNameId').innerHTML = '';
	 	      return false;
		  }

		  function resetUnitAndSector(){
			  document.getElementById('infoSearchFormId:selectedUnitId').value = null;
	  		  document.getElementById('infoSearchFormId:selectedUnitNameId').value = '';
	          document.getElementById('infoSearchFormId:unitNameId').innerHTML = '';
	          document.getElementById('infoSearchFormId:selectedSectorId').value = null;
	 	      return false;
		  }
		  
		function handleDownloadFiles(e){
    		openDownloadPopupFlagId = document.getElementById('infoSearchFormId:openDownloadPopupFlagId').value;
    		openDownloadDialogueFlagId = document.getElementById('infoSearchFormId:openDownloadDialogueFlagId').value;
    		
    		if(e.status == 'success'){
    			if(openDownloadPopupFlagId == 'true'){
    				downloadFile();
        		}else if (openDownloadDialogueFlagId == 'true'){
        			PF('dlg').show();
            	}
    		}
        }

    	function downloadFile(){
    		downloadedFileParamId = document.getElementById('infoSearchFormId:downloadedFileParamId').value;
    		openDownloadFile('#{informationSearch.boolServerDownloadPath}',downloadedFileParamId);
    		return false;
        }

		window.onkeypress = function(e) {
			  var keyCode = window.event.keyCode || e.keyCode || e.which;
		      if (keyCode == '13') {
		    	  document.getElementById('infoSearchFormId:searchBtnId').click();
		    	  return false;
		      }
		};
     </script>
</h:head>

<h:body styleClass="screenBg">
	<h:form id="infoSearchFormId" dir="#{msgs.dir}">
		<ui:decorate template="/Main/Template.xhtml">
			<table border="0" cellpadding="0" cellspacing="0" width="100%">
				<tr>
					<td width="100%" height="0" />
				</tr>

				<tr>
					<td class="screenTitle">#{msgs.title_infoSearch}</td>
				</tr>

				<tr>
					<td width="100%" height="5" />
				</tr>

				<tr>
					<td colspan="2">
						<table class="sectionTitle" border="0" cellpadding="0" cellspacing="0">
							<tr>
								<td>
									<h:outputText value="#{msgs.label_searchData}" />
								</td>
							</tr>
						</table>
					</td>
				</tr>

				<tr>
					<td width="100%" height="5" />
				</tr>

				<tr>
					<td>
						<h:panelGroup id="searchContainerId">
							<table class="sectionContent" border="0" cellpadding="0" cellspacing="0">
								<tr>
									<th width="15%">#{msgs.label_infoNumber}</th>
									<td width="20%">
										<h:inputText styleClass="form-control" id="infoNumberSearchId" value="#{informationSearch.searchInfo.infoNumber}" />
									</td>
									

									<th width="15%">#{msgs.label_incomingSide}</th>
									<td width="20%">
										<h:selectOneMenu styleClass="form-control" value="#{informationSearch.searchInfo.domainIncomingSideId}">
											<f:selectItem itemValue="#{null}" itemLabel=" " />
											<f:selectItems value="#{informationSearch.incomingSideDomainList}" var="domain" itemLabel="#{domain.description}" itemValue="#{domain.id}" />
										</h:selectOneMenu>
									</td>

								</tr>

								<tr>
									<th width="15%">#{msgs.label_infoType}</th>
									<td width="20%">
										<h:selectOneMenu styleClass="form-control" value="#{informationSearch.selectedInfoTypeId}">
											<f:selectItem itemValue="#{null}" itemLabel=" " />
											<f:selectItems value="#{informationSearch.infoTypeList}" var="infoType" itemLabel="#{infoType.description}" itemValue="#{infoType.id}" />
											<f:ajax event="change" execute="@this" render="infoSearchFormId:infoSubjectMenuId" listener="#{informationSearch.getInfoSubjectByInfoTypeId()}" />
										</h:selectOneMenu>
									</td>
									

									<th width="15%">#{msgs.label_infoSubject}</th>
									<td width="20%">
										<h:selectOneMenu styleClass="form-control" id="infoSubjectMenuId" value="#{informationSearch.selectedInfoSubjectId}">
											<f:selectItem itemValue="#{null}" itemLabel=" " />
											<f:selectItems value="#{informationSearch.infoSubjectList}" var="infoSubject" itemLabel="#{infoSubject.description}" itemValue="#{infoSubject.id}" />
										</h:selectOneMenu>
									</td>

								</tr>

								<tr>
									<th width="15%">#{msgs.label_infoReceiveDate}</th>
									<td width="20%">
										<util:advancedHijriDate id="fromDateId" value="#{informationSearch.fromDate}" />
									</td>
									
									<th width="15%">#{msgs.label_to}</th>
									<td width="20%">
										<util:advancedHijriDate id="toDateId" value="#{informationSearch.toDate}" />
									</td>

								</tr>

								<tr>
									<th width="15%">#{msgs.label_sources}</th>
									<td width="20%">
										<h:panelGroup id="infoSourcePanelId">
											<h:selectOneMenu value="#{informationSearch.infoSourceType}" styleClass="form-control">
												<f:selectItem itemValue="#{null}" itemLabel=" " />
												<f:selectItem itemValue="#{informationSearch.assignmentType}" itemLabel="#{msgs.label_assignments}" />
												<f:selectItem itemValue="#{informationSearch.openSourceType}" itemLabel="#{msgs.label_openSources}" />
												<f:ajax execute="infoSearchFormId:infoSourcePanelId" render="infoSearchFormId:infoSourcePanelId" listener="#{informationSearch.initSources()}" />
											</h:selectOneMenu>

											<h:panelGroup rendered="#{informationSearch.infoSourceType != informationSearch.openSourceType }">
												<h:commandButton value="&#xf002;" styleClass="btn btn-trans-icon" onclick="return getAssignments('#{request.contextPath}');" />
												<h:inputHidden id="selectedAssignmentIdId" value="#{informationSearch.assignmentDetailId}" />
												<h:outputText id="selectedAssignmentCodeId" value="#{informationSearch.sourceCode}" />
											</h:panelGroup>

											<h:panelGroup rendered="#{informationSearch.infoSourceType == informationSearch.openSourceType}">
												<h:commandButton value="&#xf002;" styleClass="btn btn-trans-icon" onclick="return getOpenSource('#{request.contextPath}');" />
												<h:inputHidden id="selectedOpenSourceIdId" value="#{informationSearch.openSourceId}" />
												<h:outputText id="selectedOpenSourceNameId" value="#{informationSearch.sourceCode}" />
											</h:panelGroup>
										</h:panelGroup>
									</td>
									
									<th width="15%">#{msgs.label_infoRelatedEntities}</th>
									<td width="20%">
										<h:panelGroup id="relatedEntitiesPanelId">
											<h:selectOneMenu id="relatedEntityMenuId" value="#{informationSearch.infoRelatedEntityType}" styleClass="form-control">
												<f:selectItem itemValue="#{null}" itemLabel=" " />
												<f:selectItem itemValue="4" itemLabel="#{msgs.label_countries}" />
												<f:selectItem itemValue="3" itemLabel="#{msgs.label_departments}" />
												<f:selectItem itemValue="5" itemLabel="#{msgs.label_entities}" />
												<f:selectItem itemValue="1" itemLabel="#{msgs.label_employees}" />
												<f:selectItem itemValue="2" itemLabel="#{msgs.label_nonEmployees}" />
												<f:ajax execute="infoSearchFormId:relatedEntitiesPanelId" render="infoSearchFormId:relatedEntitiesPanelId" listener="#{informationSearch.initRelatedEntities()}" />
											</h:selectOneMenu>

											<h:panelGroup rendered="#{informationSearch.infoRelatedEntityType == 4}">
												<h:commandButton value="&#xf002;" styleClass="btn btn-trans-icon" onclick="return getCountry('#{request.contextPath}');" />
												<h:inputHidden id="selectedCountryIdId" value="#{informationSearch.countryId}" />
												<h:outputText id="selectedCountryNameId" value="#{informationSearch.entityName}" />
											</h:panelGroup>

											<h:panelGroup rendered="#{informationSearch.infoRelatedEntityType == 3}">
												<h:commandButton value="&#xf002;" styleClass="btn btn-trans-icon" onclick="return getDepartment('#{request.contextPath}');" />
												<h:inputHidden id="selectedDepartmentIdId" value="#{informationSearch.departmentId}" />
												<h:outputText id="selectedDepartmentNameId" value="#{informationSearch.entityName}" />
											</h:panelGroup>

											<h:panelGroup rendered="#{informationSearch.infoRelatedEntityType == 5}">
												<h:commandButton value="&#xf002;" styleClass="btn btn-trans-icon" onclick="return getDomain('#{request.contextPath}','#{informationSearch.infoDomainPopupSearch}');" />
												<h:inputHidden id="selectedDomainIdId" value="#{informationSearch.domainId}" />
												<h:outputText id="selectedDomainNameId" value="#{informationSearch.entityName}" />
											</h:panelGroup>

											<h:panelGroup rendered="#{informationSearch.infoRelatedEntityType == 1}">
												<h:commandButton value="&#xf002;" styleClass="btn btn-trans-icon" onclick="return getEmployee('#{request.contextPath}');" />
												<h:inputHidden id="selectedEmployeeIdId" value="#{informationSearch.employeeId}" />
												<h:outputText id="selectedEmployeeNameId" value="#{informationSearch.entityName}" />
											</h:panelGroup>

											<h:panelGroup rendered="#{informationSearch.infoRelatedEntityType == 2}">
												<h:commandButton value="&#xf002;" styleClass="btn btn-trans-icon" onclick="return getNonEmployee('#{request.contextPath}');" />
												<h:inputHidden id="selectedNonEmpIdId" value="#{informationSearch.nonEmployeeId}" />
												<h:outputText id="selectedNonEmpNameId" value="#{informationSearch.entityName}" />
											</h:panelGroup>
										</h:panelGroup>
									</td>

								</tr>

								<tr>
									<th width="15%">#{msgs.label_region}</th>
									<td width="20%">
										<h:selectOneMenu value="#{informationSearch.searchInfo.regionId}">
											<f:selectItem itemValue="" />
											<f:selectItems value="#{informationSearch.regionsList}" var="y" itemLabel="#{y.arabicName}" itemValue="#{y.id}" />
											<f:ajax event="change" onevent="function(e){if(e.status == 'success') return resetUnitAndSector();}" execute="@this" render="infoSearchFormId:sectorListId infoSearchFormId:sectorIdsId infoSearchFormId:unitBtnId infoSearchFormId:unitPanelId" listener="#{informationSearch.getRegionSectors()}" />
										</h:selectOneMenu>
									</td>
									
									<th width="15%">#{msgs.label_sector}</th>
									<td width="20%">
										<h:selectOneMenu disabled="#{empty informationSearch.searchInfo.regionId}" id="sectorListId" value="#{informationSearch.searchInfo.sectorId}">
											<f:selectItem itemValue="" />
											<f:selectItems value="#{informationSearch.sectorsList}" var="y" itemLabel="#{y.arabicName}" itemValue="#{y.id}" />
											<f:ajax event="change" onevent="function(e){if(e.status == 'success') return resetUnit();}" execute="@this infoSearchFormId:sectorIdsId" render="infoSearchFormId:unitBtnId infoSearchFormId:selectedSectorId infoSearchFormId:sectorIdsId infoSearchFormId:unitPanelId" />
										</h:selectOneMenu>
										<h:inputHidden id="sectorIdsId" value="#{informationSearch.sectorIds}" />
										<h:inputHidden id="selectedSectorId" value="#{informationSearch.searchInfo.sectorId}" />
									</td>

								</tr>

								<tr>
									<th width="15%;">
										<h:outputText value="#{msgs.label_unit}" />
										<h:commandButton id="unitBtnId" disabled="#{empty informationSearch.searchInfo.regionId}" value="&#xf002;" styleClass="btn btn-trans-icon" onclick="return getUnit('#{request.contextPath}');" title="#{msgs.label_addUnit}" />
									</th>
									<td width="20%">
										<h:panelGroup id="unitPanelId">
											<h:inputHidden id="selectedUnitId" value="#{informationSearch.searchInfo.unitId}" />
											<h:inputHidden id="selectedUnitNameId" value="#{informationSearch.searchInfo.unitName}" />
											<h:outputText id="unitNameId" value="#{informationSearch.searchInfo.unitName}" />
										</h:panelGroup>
									</td>
									
									<th width="15%;">
										<h:outputText value="#{msgs.label_infoDetails}" />
									</th>
									<td width="20%" colspan="1">
										<!-- <h:inputTextarea style="width: 100%;" id="infoDetailsId" styleClass="form-control" value="#{informationSearch.searchInfo.infoDetails}" rows="3"  /> -->
										<h:inputText styleClass="form-control" id="infoDetailsId" value="#{informationSearch.searchInfo.infoDetails}" />
									</td>

								</tr>

								<tr>
									<th width="15%;">
										<h:outputText value="#{msgs.label_phoneNumber}" />
									</th>
									<td width="20%" colspan="1">
										<h:inputText maxlength="19" styleClass="form-control" onblur="return isPhoneNumber(this)" onkeypress="return checkPhoneNumber(event)" value="#{informationSearch.searchPhoneNumber}" />
									</td>
									
									<th width="15%">
										<h:outputText value="#{msgs.label_fileNumber}" />
									</th>
									<td width="20%">
										<h:inputText style=" direction: ltr; text-align: right;width:50% " value="#{informationSearch.searchInfo.incomingFileNumber}" />
										<h:inputText maxlength="4" styleClass="form-control" style="width:20%" value="#{informationSearch.searchInfo.incomingFileYear}" onkeypress="return checkDigit(event)" />
									</td>
								</tr>
								
								<tr>
									<th width="15%">
										<h:outputText value="#{msgs.label_incomingFromDate}" />
									</th>
									<td width="20%">
										<util:advancedHijriDate value="#{informationSearch.incomingFromDate}" />
									</td>

									<th width="15%">
										<h:outputText value="#{msgs.label_incomingToDate}" />
									</th>
									<td width="20%">
										<util:advancedHijriDate value="#{informationSearch.incomingToDate}" />
									</td>
								</tr>
								
								<tr>
									<th width="15%">
										<h:outputText value="#{msgs.label_incomingNumber}" />
									</th>
									<td width="20%">
										<h:inputText styleClass="form-control" value="#{informationSearch.searchInfo.incomingNumber}" maxlength="20" />
									</td>

									<th width="15%">
									</th>
									<td width="20%">
									</td>
								</tr>

							</table>
						</h:panelGroup>
					</td>
				</tr>

				<tr>
					<td width="100%" height="5" />
				</tr>

				<tr>
					<td width="100%">
						<table class="actionsSection" border="0" cellpadding="0" cellspacing="0">
							<tr>
								<td>
									<h:commandButton styleClass="btn btn-default" id="resetBtnId" value="&#xf021; #{msgs.label_reset}" action="#{informationSearch.init()}">
										<f:ajax render="infoSearchFormId:searchContainerId" />
									</h:commandButton>
									<h:commandButton styleClass="btn btn-default" id="searchBtnId" value="&#xf002; #{msgs.label_search}" action="#{informationSearch.searchInfoData()}">
										<f:ajax render="infoSearchFormId:infoViewPanelId" execute="infoSearchFormId:searchContainerId" />
									</h:commandButton>
								</td>
							</tr>
						</table>
					</td>
				</tr>

				<tr>
					<td width="100%" height="5" />
				</tr>

				<tr>
					<td>
						<table class="sectionTitle" border="0" cellpadding="0" cellspacing="0">
							<tr>
								<td>
									<h:outputText value="#{msgs.label_searchData}" />
								</td>
							</tr>
						</table>
					</td>
				</tr>

				<tr>
					<td width="100%" height="5" />
				</tr>

				<tr>
					<td align="center" width="100%">
						<h:panelGroup id="infoViewPanelId">
							<p:dataTable reflow="true" tableStyle="table-layout: auto" paginator="true" id="infoDataListDataTableId" rows="10" rowIndexVar="index" var="row" value="#{informationSearch.infoDataList}" rowHover="true">
								<p:column styleClass='centerText'>
									<f:facet name="header">#</f:facet>
	                                #{index + 1}
	                            </p:column>
								<p:column styleClass='centerText'>
									<f:facet name="header"> #{msgs.label_infoNumber} </f:facet>
									<h:outputText id="infoNumberViewId" value="#{row.infoNumber}" />
								</p:column>
								<p:column styleClass='centerText'>
									<f:facet name="header"> #{msgs.label_infoReceiveDate} </f:facet>
									<h:outputText id="receiveDateViewId" value="#{row.receiveDateString}" />
								</p:column>
								<p:column styleClass='centerText'>
									<f:facet name="header"> #{msgs.label_infoStatus} </f:facet>
									<h:outputText rendered="#{row.status==1}" value="#{msgs.label_infoStatusRegistered}" />
									<h:outputText rendered="#{row.status==2}" value="#{msgs.label_infoStatusSentForAction}" />
									<h:outputText rendered="#{row.status==3}" value="#{msgs.label_infoStatusActionDone}" />
									<h:outputText rendered="#{row.status==4}" value="#{msgs.label_infoStatusProcessing}" />
									<h:outputText rendered="#{row.status==5}" value="#{msgs.label_infoStatusDoneProcessing}" />
									<h:outputText rendered="#{row.status==6}" value="#{msgs.label_infoStatusDone}" />
								</p:column>
								<p:column styleClass='centerText'>
									<f:facet name="header"> #{msgs.label_incomingNumber} </f:facet>
									<h:outputText id="incomingNumberViewId" value="#{row.incomingNumber}" />
								</p:column>
								<p:column styleClass='centerText'>
									<f:facet name="header"> #{msgs.label_incomingDate} </f:facet>
									<h:outputText id="incomingDateViewId" value="#{row.incomingDateString}" />
								</p:column>
								<p:column styleClass='centerText' width="15%">
									<f:facet name="header"> #{msgs.label_incomingSide} </f:facet>
									<h:selectOneMenu disabled="true" styleClass="form-control" value="#{row.domainIncomingSideId}" style="margin-right: 0px;">
										<f:selectItem itemValue="#{null}" itemLabel=" " />
										<f:selectItems value="#{informationSearch.incomingSideDomainList}" var="domain" itemLabel="#{domain.description}" itemValue="#{domain.id}" />
									</h:selectOneMenu>
								</p:column>
								<p:column styleClass='centerText' width="25%">
									<f:facet name="header"> #{msgs.label_infoDetails} </f:facet>
									<h:outputText styleClass="form-control" id="infoDetailsViewId" value="#{row.infoDetails}" />
								</p:column>
								<p:column styleClass='centerText' style="width:5%;">
									<f:facet name="header"> #{msgs.label_viewEdit} </f:facet>
									<h:commandButton id="viewInfoId" onclick="this.form.target='_blank'" value="&#xf06e;" styleClass="btn btn-trans-icon" action="#{informationSearch.viewInfoData(row)}" />
								</p:column>
								<p:column styleClass='centerText' style="width:5%;">
									<f:facet name="header"> #{msgs.label_delete} </f:facet>
									<h:commandButton id="deleteActionBtnId" value="&#xf00d;" styleClass="btn btn-trans-icon" action="#{informationSearch.deleteInfoData(row)}" onclick="return confirm('#{msgs.q_delete}');">
										<f:ajax render="infoSearchFormId:notifyMessagesId infoSearchFormId:infoViewPanelId">
										</f:ajax>
									</h:commandButton>
								</p:column>
								<p:column styleClass='centerText'>
									<f:facet name="header"> #{msgs.label_archiveDocumentsShow} </f:facet>
									<h:commandButton styleClass="btn btn-success" value="&#xf0c5; #{msgs.label_archiveDocumentsShow}">
										<f:ajax render="infoSearchFormId:downloadDlgPanelId infoSearchFormId:openDownloadDialogueFlagId infoSearchFormId:openDownloadPopupFlagId infoSearchFormId:downloadedFileParamId" listener="#{informationSearch.getDownloadedAttachmentsIdList(row.id)}" onevent="handleDownloadFiles" />
									</h:commandButton>
								</p:column>
								<p:column>
									<f:facet name="header"> #{msgs.label_print} </f:facet>
									<p:rowToggler rendered="#{row.status == 6}" />
								</p:column>
								<p:rowExpansion>
									<table class="sectionContent" border="0" cellpadding="0" cellspacing="0">
										<tr>
											<th width="15%">#{msgs.label_letterNotes}</th>
											<td width="35%" style="border-color: white;">
												<h:inputTextarea styleClass="form-control" id="letterNotesId" value="#{row.letterNotes}" />
											</td>

											<th width="15%">#{msgs.label_letterCopies}</th>
											<td width="35%" style="border-color: white;">
												<h:inputTextarea styleClass="form-control" id="letterCopiesId" value="#{row.letterCopies}" />
												<h:commandButton value="&#xf02f;" styleClass="btn btn-trans-icon" action="#{informationSearch.print(row)}">
												</h:commandButton>
												<h:commandButton value="&#xf0c7;" styleClass="btn btn-trans-icon" action="#{informationSearch.update(row)}">
													<f:ajax render="infoSearchFormId:infoViewPanelId" execute="infoSearchFormId:infoViewPanelId" />
												</h:commandButton>
											</td>
										</tr>
									</table>
								</p:rowExpansion>
								<p:column>
									<f:facet name="header">
										<h:outputText value="#{msgs.label_workFlowProgress}" />
									</f:facet>
									<p:commandButton value="&#xf03a;" rendered="#{row.wFInstanceId != null}" styleClass="btn btn-trans-icon" onclick="getWorkflow('#{request.contextPath}', '#{row.wFInstanceId}'); return false;" />
								</p:column>
							</p:dataTable>
						</h:panelGroup>
					</td>
				</tr>

				<tr>
					<td width="100%" height="5" />
				</tr>
			</table>
			<h:panelGroup id="downloadDlgPanelId">
				<p:dialog dir="#{msgs.dir}" header="#{msgs.label_archiveDocumentsShow}" id="dlgId" widgetVar="dlg" modal="true" height="180px;" width="720px">
					<h:panelGroup id="internalDlgPanelId">
						<table width="100%">
							<tr>
								<td>
									<p:dataTable tableStyle="table-layout:auto" reflow="true" liveResize="true" paginatorPosition="bottom" id="fileListIds" paginator="true" style="width:100%" rowIndexVar="index" rows="10" var="row" value="#{informationSearch.attachmentList}" widgetVar="table" rowHover="true">
										<p:column styleClass='centerText'>
											<f:facet name="header">#</f:facet>
		                                    #{index + 1}
	                                   	</p:column>
										<p:column styleClass='centerText'>
											<f:facet name="header">
													#{msgs.label_fileName}
												</f:facet>
											<h:outputText value="#{row.fileName}" />
										</p:column>
										<p:column styleClass='centerText'>
											<f:facet name="header">
												#{msgs.label_download}
											</f:facet>
											<h:commandButton styleClass="btn btn-success" value="&#xf019; #{msgs.label_download}">
												<f:ajax render="infoSearchFormId:internalDlgPanelId infoSearchFormId:downloadedFileParamId" listener="#{informationSearch.getDownloadParam(row.attachmentId)}" onevent="function(e){if(e.status == 'success') return downloadFile();}" />
											</h:commandButton>
										</p:column>
										<p:column styleClass='centerText'  rendered="#{informationSearch.deletePrivilage}">
											<f:facet name="header">
												#{msgs.label_delete}
											</f:facet>
											<h:commandButton styleClass="btn btn-trans-icon" value="&#xf00d;">
												<f:ajax render="infoSearchFormId:internalDlgPanelId infoSearchFormId:downloadedFileParamId" listener="#{informationSearch.deleteAttachment(row)}" />
											</h:commandButton>
										</p:column>
									</p:dataTable>
								</td>
							</tr>
						</table>
					</h:panelGroup>
				</p:dialog>
				<h:inputHidden id="downloadedFileParamId" value="#{informationSearch.downloadFileParamId}" />
				<h:inputHidden id="openDownloadPopupFlagId" value="#{informationSearch.openDownloadPopupFlag}" />
				<h:inputHidden id="openDownloadDialogueFlagId" value="#{informationSearch.openDownloadDialogueFlag}" />
			</h:panelGroup>
		</ui:decorate>
	</h:form>
</h:body>
</html>