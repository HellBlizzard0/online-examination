<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xmlns:h="http://java.sun.com/jsf/html" xmlns:p="http://primefaces.org/ui" xmlns:f="http://java.sun.com/jsf/core" xmlns:util="http://java.sun.com/jsf/composite/util" xmlns:ui="http://java.sun.com/jsf/facelets">
<h:head>
	<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
	<h:outputStylesheet library="css" name="styles.css" />
	<h:outputStylesheet library="css" name="grid.css" />
	<h:outputStylesheet library="css" name="bootstrap.css" />
	<h:outputScript name="utilities.js" library="javascript" target="head" />
	<script type="text/javascript">
		function insertReminder() {

			var startDateDayId = document.getElementById("reminderFormId:reminderDateId:dateValueIdDay").value;
			var startDateMonthId = document.getElementById("reminderFormId:reminderDateId:dateValueIdMonth").value;
			var startDateYearId = document.getElementById("reminderFormId:reminderDateId:dateValueIdYear").value;

			var reminderTimeId = document.getElementById('reminderFormId:reminderTimeId').value;
			var reminderDetailsId = document.getElementById('reminderFormId:reminderDetailsId').value;

			/* <![CDATA[ */
			if (reminderTimeId == null || reminderTimeId == "" || reminderDetailsId == null || reminderDetailsId == "" || startDateDayId == null || startDateDayId == "" || startDateMonthId == null || startDateMonthId == "" || startDateYearId == null || startDateYearId == "") {
				showErrorMessage('#{msgs.error_mandatory}');
				return false;
			} else {

				returnVal = new Array();
				returnVal[0] = startDateDayId;
				returnVal[1] = startDateMonthId;
				returnVal[2] = startDateYearId;

				returnVal[3] = reminderTimeId;
				returnVal[4] = reminderDetailsId;
				window.returnValue = returnVal;

				window.opener.HandlePopupResult(returnVal);
				window.close();
				return true;
			}
			/* ]]> */
		}

		function validateTime(t) {
			var time = document.getElementById("reminderFormId:reminderTimeId");
			var min = time.value.substring(0, 2);
			var sec = time.value.substring(3, 5);
			/* <![CDATA[ */
			if (min != parseInt(min) || sec != parseInt(sec) || parseInt(min) > 23 || parseInt(sec) > 59) {
				time.value = "";
				return false;
			}
			/* ]]> */
			return true;
		}
		function releaseMask() {
			unMaskScreen();
		}
		window.onunload = unloadPage;
		function unloadPage() {
			window.opener.releaseMask();

		}
	</script>
</h:head>
<h:body styleClass="screenBg" onunload="unloadPage();">
	<h:form id="reminderFormId" dir="#{msgs.dir}">
		<ui:decorate template="/Main/TemplateMiniSearch.xhtml">

			<table border="0" cellpadding="0" cellspacing="3" width="100%" class="bgcolor-pup">
				<tr valign="top">
					<td width="100%">
						<table border="0" cellpadding="0" cellspacing="0" width="100%">
							<tr>
								<td width="100%" height="5" />
							</tr>
							<tr>
								<td class="screenTitle">
									<h:outputText value="#{msgs.title_insertReminder}" />
								</td>
							</tr>

							<tr>
								<td width="100%" height="5" />
							</tr>
							<tr>
								<td width="100%">
									<h:panelGroup id="reminderPanelId">
										<table class="sectionContent" border="0" cellpadding="0" cellspacing="0">
											<tr>
												<th width="15%">
													#{msgs.label_reminderDate}
													<h:outputText value="*" style="color:red;" />
												</th>
												<td width="20%">
													<util:advancedHijriDate id="reminderDateId" value="#{reminderMiniSearch.reminderData.reminderDate}" />
												</td>
												<td width="65%"></td>
												<td width="65%"></td>
											</tr>
											<tr>
												<th width="15%">
													#{msgs.label_reminderTime}
													<h:outputText value="*" style="color:red;" />
												</th>
												<td width="35%">
													<p:inputMask id="reminderTimeId" style=" direction: ltr; text-align: right; " value="#{reminderMiniSearch.reminderData.reminderTime}" mask="99:99" onblur="return validateTime();" />
												</td>
												<td width="65%"></td>
												<td width="65%"></td>
											</tr>
											<tr>
												<th width="15%">
													#{msgs.label_reminderDetails}
													<h:outputText value="*" style="color:red;" />
												</th>
												<td colspan="1" width="35%">
													<h:inputTextarea id="reminderDetailsId" styleClass="form-control" style="width: 100%;" value="#{reminderMiniSearch.reminderData.reminderDetails}" onkeypress="return valdiateMaxLength(this, 500);" onblur="return isValdiateMaxLength(this, 500);" />
												</td>
												<td width="65%"></td>
												<td width="65%"></td>
											</tr>
										</table>
									</h:panelGroup>
								</td>
							</tr>
						</table>
					</td>
				</tr>
				<tr>
					<td>
						<table class="actionsSection" border="0" cellpadding="0" cellspacing="0" width="100%">
							<tr>
								<td>
									<h:commandButton styleClass="btn btn-default btn-reset" id="returnBtn" value="#{msgs.label_goBack}" onclick="window.close();">
									</h:commandButton>
									<h:commandButton id="addBtnId" styleClass="btn btn-default" value="#{msgs.label_save}" onclick="return insertReminder();">
									</h:commandButton>
								</td>
							</tr>
						</table>
					</td>
				</tr>
			</table>
		</ui:decorate>
	</h:form>
</h:body>
</html>

