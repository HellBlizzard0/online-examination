<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xmlns:h="http://java.sun.com/jsf/html" xmlns:p="http://primefaces.org/ui" xmlns:ui="http://java.sun.com/jsf/facelets" xmlns:f="http://java.sun.com/jsf/core" xmlns:util="http://java.sun.com/jsf/composite/util">
<h:head>
	<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />

	<h:outputStylesheet library="css" name="styles.css" />
	<h:outputStylesheet library="css" name="grid.css" />
	<h:outputStylesheet library="css" name="bootstrap.css" />

	<h:outputScript name="utilities.js" library="javascript" target="head" />
	<script type="text/javascript">
		var m;
	
		function getDepartment(contextPath,mode){
	    	m = 1;
			openDepartmentsMiniSearch(contextPath,mode, null, '#{nonEmployeeAssignmentSearch.departmentType}');
			return false;
		}
		
		function getEmployee(contextPath,mode){
			m = 2;
			openEmpsMiniSearch(contextPath,mode);
			return false;
		}
		
		function getNonEmployeeAssignmentView(contextPath,id,status,regStatus)
		{
			if(status!=regStatus) {
				openNonEmployeeAssignmentView(contextPath,id);
				return false;
			}
			return true;
		}

		function getOfficer(contextPath,mode,depsList){
			m = 3;
			openEmpsMiniSearch(contextPath, mode, depsList);
			return false;
		}
		
		function getSector(contextPath) {
			m = 4;
			var regionId = document.getElementById('assignSearchFormId:selectedRegionId').value
			openDepartmentsMiniSearch(contextPath, 5, regionId, null);
			return false;
		}
		
		function getUnit(contextPath,sectorId) {
    		m = 5;
    		openDepartmentsMiniSearch(contextPath,6,sectorId, null);
    		return false;
    	}
		
		function releaseMask(){
			unMaskScreen();
	   	}
	   	
		function HandlePopupResult(ret) { 
			unMaskScreen();
			if(ret!=null){
	    		if( m== 1){
	    			document.getElementById('assignSearchFormId:selectedRegionId').value = ret[0];
	   	         	document.getElementById('assignSearchFormId:selectedRegionNameId').value = ret[1];
	   	         	document.getElementById('assignSearchFormId:regionNameId').innerHTML = ret[1];
	   	        	document.getElementById('assignSearchFormId:selectedSectorId').value = null;
					document.getElementById('assignSearchFormId:selectedSectorNameId').value = '';
					document.getElementById('assignSearchFormId:sectorNameId').innerHTML = '';
					document.getElementById('assignSearchFormId:selectedUnitId').value = null;
	    		  	document.getElementById('assignSearchFormId:selectedUnitNameId').value = '';
	            	document.getElementById('assignSearchFormId:unitNameId').innerHTML = '';
	   	         	document.getElementById('assignSearchFormId:selectedOfficerId').value = null;
         			document.getElementById('assignSearchFormId:selectedOfficerNameId').value = '';
                 	document.getElementById('assignSearchFormId:officerNameId').innerHTML = '';
                 
					document.getElementById('assignSearchFormId:updateSectorAndDepsListButtonId').click();
	       		}else if (m == 2){
	           		document.getElementById('assignSearchFormId:selectedEmployeeId').value=ret[0];
	           		document.getElementById('assignSearchFormId:selectedEmployeeNameId').value=ret[1];
	           		document.getElementById('assignSearchFormId:employeeNameId').innerHTML=ret[1];
	      		}else if (m == 3){
	      			document.getElementById('assignSearchFormId:selectedOfficerId').value=ret[0];
	           		document.getElementById('assignSearchFormId:selectedOfficerNameId').value=ret[1];
	           		document.getElementById('assignSearchFormId:officerNameId').innerHTML=ret[1];
	      		} else if (m == 4) {
					document.getElementById('assignSearchFormId:selectedSectorId').value = ret[0];
					document.getElementById('assignSearchFormId:selectedSectorNameId').value = ret[1];
					document.getElementById('assignSearchFormId:sectorNameId').innerHTML = ret[1];
					document.getElementById('assignSearchFormId:selectedUnitId').value = null;
	    		  	document.getElementById('assignSearchFormId:selectedUnitNameId').value = '';
	            	document.getElementById('assignSearchFormId:unitNameId').innerHTML = '';
	            	document.getElementById('assignSearchFormId:selectedOfficerId').value = null;
         			document.getElementById('assignSearchFormId:selectedOfficerNameId').value = '';
                 	document.getElementById('assignSearchFormId:officerNameId').innerHTML = '';
	            	document.getElementById('assignSearchFormId:updateUnitButtonId').click();
				} else if (m==5)
    	  		{
    	  			document.getElementById('assignSearchFormId:selectedUnitId').value = ret[0];
            		document.getElementById('assignSearchFormId:selectedUnitNameId').value = ret[1];
                    document.getElementById('assignSearchFormId:unitNameId').innerHTML = ret[1];
                    document.getElementById('assignSearchFormId:selectedOfficerId').value = null;
         			document.getElementById('assignSearchFormId:selectedOfficerNameId').value = '';
                 	document.getElementById('assignSearchFormId:officerNameId').innerHTML = '';
                    document.getElementById('assignSearchFormId:updateUnitBtnId').click();
    	  		}
	         	return true;
	   		}
	   		return false;
		}
		window.onkeypress = function(e) {
			  var keyCode = window.event.keyCode || e.keyCode || e.which;
		      if (keyCode == '13') {
		    	  document.getElementById('assignSearchFormId:searchBtnId').click();
		    	  return false;
		      }
		};
	</script>
</h:head>
<h:body styleClass="screenBg">
	<h:form id="assignSearchFormId" dir="#{msgs.dir}">
		<ui:decorate template="/Main/Template.xhtml">
			<table border="0" cellpadding="0" cellspacing="0" width="100%">


				<tr>
					<td class="screenTitle">#{msgs.title_nonEmployeeAssignmentSearch}</td>
				</tr>

				<tr>
					<td width="100%" height="5" />
				</tr>

				<tr>
					<td colspan="2">
						<table class="sectionTitle" border="0" cellpadding="0" cellspacing="0">
							<tr>
								<td>
									<h:outputText value="#{msgs.label_searchData}" />
								</td>
							</tr>
						</table>
					</td>
				</tr>

				<tr>
					<td width="100%" height="5" />
				</tr>

				<tr>
					<td>
						<h:panelGroup id="searchContainerId">
							<table class="sectionContent" border="0" cellpadding="0" cellspacing="0">
								<tr>
									<th width="15%">#{msgs.label_agentCode}</th>
									<td width="20%">
										<h:inputText maxlength="12" styleClass="form-control inputnumber" value="#{nonEmployeeAssignmentSearch.assignmentDetailDataSearch.agentCode}" />
									</td>


									<th width="15%">#{msgs.label_name}</th>
									<td width="20%">
										<h:inputText styleClass="form-control" value="#{nonEmployeeAssignmentSearch.assignmentDetailDataSearch.fullName}" />
									</td>

								</tr>

								<tr>
									<th width="15%">#{msgs.label_identity}</th>
									<td width="20%">
										<h:inputText styleClass="form-control inputnumber" value="#{nonEmployeeAssignmentSearch.assignmentDetailDataSearch.identity}" />
									</td>

									<th width="15%">#{msgs.label_agentStatus}</th>
									<td width="20%">
										<h:selectOneMenu class="form-control" value="#{nonEmployeeAssignmentSearch.active}">
											<f:selectItem noSelectionOption="true" itemValue="-1" itemLabel="#{msgs.label_all}" />
											<f:selectItem itemValue="0" itemLabel="#{msgs.label_agentNonHeld}" />
											<f:selectItem itemValue="1" itemLabel="#{msgs.label_agentHeld}" />
											<f:selectItem itemValue="2" itemLabel="#{msgs.label_notStarted}" />
										</h:selectOneMenu>
									</td>

								</tr>

								<tr>
									<th width="15%">
										#{msgs.label_region}
										<h:commandButton rendered="#{not nonEmployeeAssignmentSearch.regionFlag}" value="&#xf002;" styleClass="btn btn-trans-icon" onclick="return getDepartment('#{request.contextPath}',2);" title="#{msgs.label_addDepartment}" />
										<h:commandButton id="updateSectorAndDepsListButtonId" style="display : none ;" action="#{nonEmployeeAssignmentSearch.updateDepsList(nonEmployeeAssignmentSearch.assignmentDetailDataSearch.regionId , null ,null)}">
											<f:ajax execute="assignSearchFormId:selectedRegionId assignSearchFormId:selectedSectorId" render="assignSearchFormId:assignmentOfficerButtonId assignSearchFormId:sectorPanelId assignSearchFormId:unitBtnPanelId"></f:ajax>
										</h:commandButton>
									</th>
									<td width="20%">
										<h:inputHidden id="selectedRegionId" value="#{nonEmployeeAssignmentSearch.assignmentDetailDataSearch.regionId}" />
										<h:inputHidden id="selectedRegionNameId" value="#{nonEmployeeAssignmentSearch.assignmentDetailDataSearch.regionName}" />
										<h:outputText id="regionNameId" value="#{nonEmployeeAssignmentSearch.assignmentDetailDataSearch.regionName}" />
									</td>

									<th width="15%">
										<h:panelGroup id="sectorPanelId">
											<h:outputText rendered="#{nonEmployeeAssignmentSearch.assignmentDetailDataSearch.regionId != nonEmployeeAssignmentSearch.headQuarterId}" value="#{msgs.label_sector}" />
											<h:commandButton id="sectorButtonId" disabled="#{empty nonEmployeeAssignmentSearch.assignmentDetailDataSearch.regionId}" rendered="#{nonEmployeeAssignmentSearch.assignmentDetailDataSearch.regionId != nonEmployeeAssignmentSearch.headQuarterId}" value="&#xf002;" styleClass="btn btn-trans-icon" onclick="return getSector('#{request.contextPath}');" title="#{msgs.title_addNewSector}" />
											<h:commandButton id="updateUnitButtonId" style="display : none ;" action="#{nonEmployeeAssignmentSearch.updateDepsList(nonEmployeeAssignmentSearch.assignmentDetailDataSearch.regionId , nonEmployeeAssignmentSearch.assignmentDetailDataSearch.sectorId , null)}">
												<f:ajax execute="assignSearchFormId:selectedSectorId assignSearchFormId:unitBtnId  assignSearchFormId:assignmentOfficerButtonId  assignSearchFormId:unitPanelId" render="assignSearchFormId:unitBtnId  assignSearchFormId:assignmentOfficerButtonId  assignSearchFormId:unitPanelId"></f:ajax>
											</h:commandButton>
										</h:panelGroup>
									</th>
									<td width="20%">
										<h:inputHidden id="selectedSectorId" value="#{nonEmployeeAssignmentSearch.assignmentDetailDataSearch.sectorId}" />
										<h:inputHidden id="selectedSectorNameId" value="#{nonEmployeeAssignmentSearch.assignmentDetailDataSearch.sectorName}" />
										<h:outputText id="sectorNameId" value="#{nonEmployeeAssignmentSearch.assignmentDetailDataSearch.sectorName}" />
									</td>

								</tr>

								<tr>
									<th width="15%">
										<h:panelGroup id="unitBtnPanelId">
											<h:outputText value="#{msgs.label_unit}" rendered="#{nonEmployeeAssignmentSearch.assignmentDetailDataSearch.regionId != nonEmployeeAssignmentSearch.headQuarterId}" />
											<h:commandButton id="unitBtnId" disabled="#{empty nonEmployeeAssignmentSearch.assignmentDetailDataSearch.sectorId}" rendered="#{nonEmployeeAssignmentSearch.assignmentDetailDataSearch.regionId != nonEmployeeAssignmentSearch.headQuarterId}" value="&#xf002;" styleClass="btn btn-trans-icon" onclick="return getUnit('#{request.contextPath}','#{nonEmployeeAssignmentSearch.assignmentDetailDataSearch.sectorId}');" title="#{msgs.label_addUnit}" />
											<h:commandButton id="updateUnitBtnId" style="display : none ;" action="#{nonEmployeeAssignmentSearch.updateDepsList(null , null , nonEmployeeAssignmentSearch.assignmentDetailDataSearch.unitId)}">
												<f:ajax execute="@form" render="assignSearchFormId:assignmentOfficerButtonId"></f:ajax>
											</h:commandButton>
										</h:panelGroup>
									</th>
									<td width="20%">
										<h:panelGroup id="unitPanelId">
											<h:inputHidden id="selectedUnitId" value="#{nonEmployeeAssignmentSearch.assignmentDetailDataSearch.unitId}" />
											<h:inputHidden id="selectedUnitNameId" value="#{nonEmployeeAssignmentSearch.assignmentDetailDataSearch.unitName}" />
											<h:outputText id="unitNameId" value="#{nonEmployeeAssignmentSearch.assignmentDetailDataSearch.unitName}" />
										</h:panelGroup>
									</td>

									<th width="15%">
										#{msgs.label_assignmentOfficer}
										<h:commandButton id="assignmentOfficerButtonId" disabled="#{nonEmployeeAssignmentSearch.depsList == null or (empty nonEmployeeAssignmentSearch.assignmentDetailDataSearch.sectorId and nonEmployeeAssignmentSearch.assignmentDetailDataSearch.regionId != nonEmployeeAssignmentSearch.headQuarterId)}" rendered="#{not nonEmployeeAssignmentSearch.regionFlag or nonEmployeeAssignmentSearch.editprivilege}" value="&#xf002;" styleClass="btn btn-trans-icon"
											onclick="return getOfficer('#{request.contextPath}',3,'#{nonEmployeeAssignmentSearch.depsList}');" title="#{msgs.label_addEmployee}" />
									</th>
									<td width="20%">
										<h:inputHidden id="selectedOfficerId" value="#{nonEmployeeAssignmentSearch.assignmentDetailDataSearch.officerId}" />
										<h:inputHidden id="selectedOfficerNameId" value="#{nonEmployeeAssignmentSearch.assignmentDetailDataSearch.officerName}" />
										<h:outputText id="officerNameId" value="#{nonEmployeeAssignmentSearch.assignmentDetailDataSearch.officerName}" />
									</td>

								</tr>

								<tr>
									<th width="15%">#{msgs.label_assignmentNonEmpDateInterval}</th>
									<td width="20%">
										<util:advancedHijriDate value="#{nonEmployeeAssignmentSearch.assignmentDetailDataSearch.startDate}" />
									</td>

									<th width="15%">#{msgs.label_to}</th>
									<td width="20%">
										<util:advancedHijriDate value="#{nonEmployeeAssignmentSearch.assignmentDetailDataSearch.approvedEndDate}" />
									</td>

								</tr>
								<tr>
									<th width="15%">#{msgs.label_assignmentType}</th>
									<td width="20%">
										<h:selectOneMenu value="#{nonEmployeeAssignmentSearch.assignmentType}" styleClass="form-control">
											<f:selectItem itemValue="-1" itemLabel="#{msgs.label_all}" />
											<f:selectItem itemLabel="#{msgs.label_assignment}" itemValue="#{nonEmployeeAssignmentSearch.assignment}" />
											<f:selectItem itemLabel="#{msgs.label_cooperator}" itemValue="#{nonEmployeeAssignmentSearch.cooperetor}" />
										</h:selectOneMenu>
									</td>
								</tr>
							</table>
						</h:panelGroup>
					</td>
				</tr>

				<tr>
					<td width="100%" height="5" />
				</tr>

				<tr>
					<td width="100%">
						<table class="actionsSection" border="0" cellpadding="0" cellspacing="0">
							<tr>
								<td>
									<h:commandButton styleClass="btn btn-default" id="resetBtnId" value="&#xf021; #{msgs.label_reset}" action="#{nonEmployeeAssignmentSearch.resetSearchFields()}">
										<f:ajax render="assignSearchFormId:searchContainerId" />
									</h:commandButton>
									<h:commandButton styleClass="btn btn-default" id="searchBtnId" value="&#xf002; #{msgs.label_search}" action="#{nonEmployeeAssignmentSearch.searchEmployeeAssignmentDetails()}">
										<f:ajax render="assignSearchFormId:employeeAssignPaneId" execute="assignSearchFormId:searchContainerId" />
									</h:commandButton>
								</td>
							</tr>
						</table>
					</td>
				</tr>

				<tr>
					<td width="100%" height="5" />
				</tr>

				<tr>
					<td>
						<table class="sectionTitle" border="0" cellpadding="0" cellspacing="0">
							<tr>
								<td>
									<h:outputText value="#{msgs.title_searchResults}" />
								</td>
							</tr>
						</table>
					</td>
				</tr>

				<tr>
					<td width="100%" height="5" />
				</tr>

				<tr>
					<td align="center" width="100%">
						<h:panelGroup id="employeeAssignPaneId">
							<p:dataTable reflow="true" tableStyle="table-layout: auto" paginator="true" id="survOrderListDataTableId" rows="#{nonEmployeeAssignmentSearch.rowsCount}" rowIndexVar="index" var="row" value="#{nonEmployeeAssignmentSearch.assignmentDetailDataList}" rowHover="true">
								<p:column styleClass='centerText'>
									<f:facet name="header">#</f:facet>
	                                #{index + 1}
	                            </p:column>

								<p:column styleClass='centerText'>
									<f:facet name="header"> #{msgs.label_agentCode} </f:facet>
									<h:outputText value="#{row.agentCode}" />
								</p:column>

								<ui:remove>
									<p:column styleClass='centerText'>
										<f:facet name="header"> #{msgs.label_identity} </f:facet>
										<h:outputText value="#{row.identity}" />
									</p:column>
								</ui:remove>

								<p:column styleClass='centerText'>
									<f:facet name="header"> #{msgs.label_name} </f:facet>
									<h:outputText value="#{row.fullName}" />
								</p:column>

								<p:column styleClass='centerText'>
									<f:facet name="header"> #{msgs.label_assignmentType} </f:facet>
									<h:outputText value="#{row.type.equals(nonEmployeeAssignmentSearch.assignment) ? msgs.label_assignment : msgs.label_cooperator }" />
								</p:column>

								<p:column styleClass='centerText'>
									<f:facet name="header"> #{msgs.label_assignmentNonEmpDateInterval} </f:facet>
									<h:outputText value="#{row.startDateString}" />
								</p:column>

								<p:column styleClass='centerText'>
									<f:facet name="header"> #{msgs.label_to} </f:facet>
									<h:outputText value="#{row.approvedEndDateString}" />
								</p:column>

								<p:column styleClass='centerText'>
									<f:facet name="header"> #{msgs.label_assignmentOfficer} </f:facet>
									<h:outputText value="#{row.officerName}" />
								</p:column>

								<p:column styleClass='centerText'>
									<f:facet name="header"> #{msgs.title_information} </f:facet>
									<h:commandButton rendered="#{row.status.equals(nonEmployeeAssignmentSearch.assignmentDetailsApprovedStatus)}" value="&#xf05a;" styleClass="btn btn-trans-icon" title="#{msgs.title_information}" action="#{nonEmployeeAssignmentSearch.getEmployeeInfos(row)}">
										<f:ajax render="assignSearchFormId:dlgInfoPanelId" onevent="function(e){if(e.status == 'success') PF('dlgInfo').show();}" />
									</h:commandButton>
								</p:column>

								<p:column styleClass='centerText'>
									<f:facet name="header"> #{msgs.label_agentFinanceRecord} </f:facet>
									<h:commandButton rendered="#{row.status.equals(nonEmployeeAssignmentSearch.assignmentDetailsApprovedStatus)}" value="&#xf0c5;" styleClass="btn btn-trans-icon" title="#{msgs.label_records}" action="#{nonEmployeeAssignmentSearch.getAgentFinDetails(row)}">
										<f:ajax render="assignSearchFormId:dlgFinPanelId" onevent="function(e){if(e.status == 'success') PF('dlgFin').show();}" />
									</h:commandButton>
								</p:column>

								<p:column styleClass='centerText'>
									<f:facet name="header"> #{msgs.label_viewEdit} </f:facet>
									<h:commandButton rendered="#{row.officerId == nonEmployeeAssignmentSearch.loginEmpData.empId and row.heldFlag == nonEmployeeAssignmentSearch.enumNotHeld and !(nonEmployeeAssignmentSearch.editprivilege)}" onclick="openNonEmployeeAssignmentView('#{request.contextPath}',#{row.id}); return false;" value="&#xf06e;" styleClass="btn btn-trans-icon" action="#{nonEmployeeAssignmentView.refreshSubmit()}">
										<f:ajax></f:ajax>
									</h:commandButton>
									<h:commandButton rendered="#{row.officerId == nonEmployeeAssignmentSearch.loginEmpData.empId or nonEmployeeAssignmentSearch.editprivilege}" value="&#xf14b;" styleClass="btn btn-trans-icon" title="#{msgs.label_viewEdit}" action="#{nonEmployeeAssignmentSearch.viewAssignmentDetail(row)}" />
								</p:column>

								<p:column styleClass='centerText'>
									<f:facet name="header"> #{msgs.label_agentStatus} </f:facet>
									<h:outputText rendered="#{row.heldFlag == nonEmployeeAssignmentSearch.enumHeldStarted}" value="#{msgs.label_agentHeld}" />
									<h:outputText rendered="#{row.heldFlag == nonEmployeeAssignmentSearch.enumNotHeld}" style="color:red;" value="#{msgs.label_agentNonHeld}" />
									<h:outputText rendered="#{row.heldFlag == nonEmployeeAssignmentSearch.enumHeldNotStarted}" value="#{msgs.label_notStarted}" />
								</p:column>

								<p:column styleClass='centerText'>
									<f:facet name="header"> 
										#{msgs.label_taskAction}
									</f:facet>
									<h:commandButton styleClass="btn btn-success" value="#{msgs.label_assignmentEvaluation}" rendered="#{row.officerId == nonEmployeeAssignmentSearch.loginEmpData.empId and row.heldFlag == nonEmployeeAssignmentSearch.enumHeldStarted}" action="#{nonEmployeeAssignmentSearch.evaluateAgent(row)}" />
									<h:commandButton styleClass="btn btn-success" value="#{msgs.label_assignmentNonEmpReAssign}" rendered="#{row.heldFlag == nonEmployeeAssignmentSearch.enumNotHeld}" action="#{nonEmployeeAssignmentSearch.reAssign(row)}" />
								</p:column>
							</p:dataTable>
						</h:panelGroup>
					</td>
				</tr>
			</table>

			<h:panelGroup id="dlgInfoPanelId">
				<p:dialog header="#{msgs.title_information}" id="dlgInfoId" widgetVar="dlgInfo" modal="true" height="200">
					<table width="100%">
						<tr>
							<td>
								<p:dataTable tableStyle="table-layout:auto" reflow="true" liveResize="true" paginatorPosition="bottom" paginator="true" style="width:100%" rowIndexVar="index" rows="10" var="employeeInfoRow" value="#{nonEmployeeAssignmentSearch.employeeInfosList}" rowHover="true">
									<p:column styleClass='centerText'>
										<f:facet name="header">
											#
										</f:facet>
                                    	#{index + 1}
                                  		</p:column>

									<p:column styleClass='centerText'>
										<f:facet name="header">
											#{msgs.label_infoNumber}
										</f:facet>
										<h:outputText value="#{employeeInfoRow.infoNumber}" />
									</p:column>

									<p:column styleClass='centerText'>
										<f:facet name="header">
											#{msgs.label_infoReceiveDate}
										</f:facet>
										<h:outputText value="#{employeeInfoRow.registerationDateString}" />
									</p:column>

									<p:column styleClass='centerText'>
										<f:facet name="header"> 
											#{msgs.label_infoNature}
										</f:facet>
										<h:outputText value="#{employeeInfoRow.infoDetails}" />
									</p:column>

									<p:column styleClass='centerText'>
										<f:facet name="header"> 
											#{msgs.label_subject}
										</f:facet>
										<h:outputText value="#{employeeInfoRow.subjectDescription}" />
									</p:column>
								</p:dataTable>
							</td>
						</tr>
						<tr>
							<td width="100%" height="5" />
						</tr>

						<tr style="text-align: center">
							<td colspan="2">
								<h:commandButton styleClass="btn btn-danger" value="&#xf00d; #{msgs.label_close}" onclick="PF('dlgInfo').hide(); return false;">
								</h:commandButton>
							</td>
						</tr>
					</table>
				</p:dialog>
			</h:panelGroup>

			<h:panelGroup id="dlgFinPanelId">
				<p:dialog header="#{msgs.label_agentFinanceRecord}" id="dlgFinId" widgetVar="dlgFin" modal="true" height="500" width="550" dir="#{msgs.dir}">
					<h:panelGroup id="agentFinPanelInnerId">
						<table width="100%">
							<tr>
								<td>
									<table class="sectionContent" border="0" cellpadding="0" cellspacing="0">
										<tr>
											<th width="15%">
												<h:outputText value="#{msgs.label_from}" />
											</th>
											<td>
												<util:advancedHijriDate value="#{nonEmployeeAssignmentSearch.fromDateFinance}" />
											</td>
										</tr>
										<tr>
											<th>
												<h:outputText value="#{msgs.label_to}" />
											</th>
											<td>
												<util:advancedHijriDate value="#{nonEmployeeAssignmentSearch.toDateFinance}" />
											</td>
										</tr>

									</table>
								</td>
							</tr>

							<tr>
								<td>
									<table class="actionsSection" border="0" cellpadding="0" cellspacing="0">
										<tr>
											<td>
												<h:commandButton styleClass="btn btn-default" value="#{msgs.label_reset}" action="#{nonEmployeeAssignmentSearch.resetFinSearch()}">
													<f:ajax render="assignSearchFormId:agentFinPanelInnerId" />
												</h:commandButton>
												<h:commandButton styleClass="btn btn-default" value="#{msgs.label_search}" action="#{nonEmployeeAssignmentSearch.searchAgentFinDetails()}">
													<f:ajax render="assignSearchFormId:agentFinPanelInnerId" execute="assignSearchFormId:agentFinPanelInnerId" />
												</h:commandButton>
											</td>
										</tr>
									</table>
								</td>
							</tr>

							<tr>
								<td width="100%" height="5" />
							</tr>
							<h:panelGroup id="monthlyRewardPanelId" rendered="#{nonEmployeeAssignmentSearch.showMonthlyRewardDetails}">

								<tr>
									<td>
										<h:outputText value="#{msgs.label_paymentMethod} :" />
										<h:outputText value="#{msgs.label_bankAccount}" rendered="#{nonEmployeeAssignmentSearch.paymentMethod.equals(nonEmployeeAssignmentSearch.bankAccountEnum)}" />
										<h:outputText value="#{msgs.label_cheque}" rendered="#{nonEmployeeAssignmentSearch.paymentMethod.equals(nonEmployeeAssignmentSearch.chequeAcountEnum)}" />
										<h:outputText value="#{msgs.label_cash}" rendered="#{nonEmployeeAssignmentSearch.paymentMethod.equals(nonEmployeeAssignmentSearch.cashAccountEnum)}" />
									</td>
								</tr>

								<tr>
									<td width="100%" height="5" />
								</tr>

								<tr>
									<td>
										<table class="sectionTitle" border="0" cellpadding="0" cellspacing="0">
											<tr>
												<td>
													<h:outputText value="#{msgs.label_monthlyReward}" />
												</td>
											</tr>
										</table>
									</td>
								</tr>

								<tr>
									<td width="100%" height="5" />
								</tr>

								<tr>
									<td>
										<p:dataTable tableStyle="table-layout:auto" reflow="true" liveResize="true" paginatorPosition="bottom" paginator="true" style="width:100%" rowIndexVar="index" rows="10" var="employeeInfoRow" value="#{nonEmployeeAssignmentSearch.finMonthlyRewardResourceDataList}" rowHover="true">
											<p:column styleClass='centerText'>
												<f:facet name="header">
												#
											</f:facet>
                                    	#{index + 1}
                                  		</p:column>

											<p:column styleClass='centerText'>
												<f:facet name="header">
												#{msgs.label_paymentAmount}
											</f:facet>
												<h:outputText value="#{employeeInfoRow.agentMonthlyReward}" />
											</p:column>

											<p:column styleClass='centerText'>
												<f:facet name="header">
												#{msgs.label_month}
											</f:facet>
												<h:outputText value="#{msgs.label_moharm}" rendered="#{employeeInfoRow.month==1}" />
												<h:outputText value="#{msgs.label_safr}" rendered="#{employeeInfoRow.month==2}" />
												<h:outputText value="#{msgs.label_rabieAwl}" rendered="#{employeeInfoRow.month==3}" />
												<h:outputText value="#{msgs.label_rabieTani}" rendered="#{employeeInfoRow.month==4}" />
												<h:outputText value="#{msgs.label_gamadAwl}" rendered="#{employeeInfoRow.month==5}" />
												<h:outputText value="#{msgs.label_gamadTani}" rendered="#{employeeInfoRow.month==6}" />
												<h:outputText value="#{msgs.label_ragb}" rendered="#{employeeInfoRow.month==7}" />
												<h:outputText value="#{msgs.label_shaban}" rendered="#{employeeInfoRow.month==8}" />
												<h:outputText value="#{msgs.label_ramdan}" rendered="#{employeeInfoRow.month==9}" />
												<h:outputText value="#{msgs.label_shwal}" rendered="#{employeeInfoRow.month==10}" />
												<h:outputText value="#{msgs.label_zwAlqada}" rendered="#{employeeInfoRow.month==11}" />
												<h:outputText value="#{msgs.label_zwAlhaga}" rendered="#{employeeInfoRow.month==12}" />
											</p:column>

											<p:column styleClass='centerText'>
												<f:facet name="header">
												#{msgs.label_paymentDate}
											</f:facet>
												<h:outputText value="#{employeeInfoRow.rewardRequestDateString}" />
											</p:column>
										</p:dataTable>
									</td>
								</tr>
							</h:panelGroup>
							<tr>
								<td>
									<table class="sectionTitle" border="0" cellpadding="0" cellspacing="0">
										<tr>
											<td>
												<h:outputText value="#{msgs.label_infosReward}" />
											</td>
										</tr>
									</table>
								</td>
							</tr>

							<tr>
								<td width="100%" height="5" />
							</tr>

							<tr>
								<td>
									<p:dataTable tableStyle="table-layout:auto" reflow="true" liveResize="true" paginatorPosition="bottom" paginator="true" style="width:100%" rowIndexVar="index" rows="10" var="employeeInfoRow" value="#{nonEmployeeAssignmentSearch.finInfoRewardList}" rowHover="true">
										<p:column styleClass='centerText'>
											<f:facet name="header">
												#
											</f:facet>
                                    	#{index + 1}
                                  		</p:column>

										<p:column styleClass='centerText'>
											<f:facet name="header">
												#{msgs.label_paymentAmount}
											</f:facet>
											<h:outputText value="#{employeeInfoRow.amount}" />
										</p:column>

										<p:column styleClass='centerText'>
											<f:facet name="header">
												#{msgs.label_paymentDate}
											</f:facet>
											<h:outputText value="#{employeeInfoRow.paymentDateString}" />
										</p:column>

										<p:column styleClass='centerText'>
											<f:facet name="header"> 
												#{msgs.label_paymentReason}
											</f:facet>
											<h:outputText value="#{employeeInfoRow.paymentReason}" />
										</p:column>
									</p:dataTable>
								</td>
							</tr>

							<tr style="text-align: center">
								<td colspan="2">
									<h:commandButton styleClass="btn btn-danger" value="#{msgs.label_close}" onclick="PF('dlgFin').hide(); return false;" />
								</td>
							</tr>
						</table>
					</h:panelGroup>
				</p:dialog>
			</h:panelGroup>
		</ui:decorate>
	</h:form>
</h:body>
</html>