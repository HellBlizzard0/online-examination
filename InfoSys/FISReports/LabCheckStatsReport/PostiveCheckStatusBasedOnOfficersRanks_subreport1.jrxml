<?xml version="1.0" encoding="UTF-8"?>
<jasperReport xmlns="http://jasperreports.sourceforge.net/jasperreports" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://jasperreports.sourceforge.net/jasperreports http://jasperreports.sourceforge.net/xsd/jasperreport.xsd" name="PostiveCheckStatusBasedOnOfficersRanks_subreport1" pageWidth="900" pageHeight="802" columnWidth="900" leftMargin="0" rightMargin="0" topMargin="0" bottomMargin="0" uuid="71cbf60e-c658-44cb-8085-4516edc1483e">
	<property name="ireport.zoom" value="0.6830134553650705"/>
	<property name="ireport.x" value="0"/>
	<property name="ireport.y" value="0"/>
	<subDataset name="pieChart" uuid="17850f96-c7e2-46c7-aad3-ff8291be763c">
		<parameter name="P_DATE_FROM" class="java.lang.String">
			<defaultValueExpression><![CDATA[]]></defaultValueExpression>
		</parameter>
		<parameter name="P_DATE_TO" class="java.lang.String">
			<defaultValueExpression><![CDATA[]]></defaultValueExpression>
		</parameter>
		<parameter name="P_DATE_FROM_FLAG" class="java.lang.String">
			<defaultValueExpression><![CDATA[]]></defaultValueExpression>
		</parameter>
		<parameter name="P_DATE_TO_FLAG" class="java.lang.String">
			<defaultValueExpression><![CDATA[]]></defaultValueExpression>
		</parameter>
		<parameter name="P_REGION_NAME" class="java.lang.String"/>
		<parameter name="P_SCHEMA_NAME" class="java.lang.String">
			<defaultValueExpression><![CDATA["INFOSYS"]]></defaultValueExpression>
		</parameter>
		<queryString>
			<![CDATA[SELECT
    DEP.ARABIC_NAME AS REGION_NAME,RANK.DESCRIPTION AS DESCRIPTION,COUNT(LCE.ID) AS COUNT
FROM
    $P!{P_SCHEMA_NAME}.STP_VW_DEPARTMENTS DEP,$P!{P_SCHEMA_NAME}.FIS_VW_LAB_CHECK_EMPLOYEES LCE,$P!{P_SCHEMA_NAME}.STP_VW_RANKS RANK
WHERE
    DEP.DEPARTMENT_TYPEID IN (
        100,75
    )
    AND   LCE.LAB_CHECK_STATUS = 2
    AND   LCE.CHECK_STATUS = 5
    AND   LCE.EMPLOYEE_REGION_ID = DEP.ID
    AND   LCE.EMPLOYEE_RANK_ID = RANK.ID
    AND   RANK.STP_CATEGORIES_ID = 1
    AND ($P{P_DATE_FROM_FLAG} = - 1 OR LCE.ORDER_DATE >= $P!{P_SCHEMA_NAME}.PKG_CHAR_TO_DATE($P{P_DATE_FROM} , 'MI/mm/YYYY'))
    AND ($P{P_DATE_TO_FLAG} = - 1 OR LCE.ORDER_DATE <= $P!{P_SCHEMA_NAME}.PKG_CHAR_TO_DATE($P{P_DATE_TO} , 'MI/mm/YYYY'))
    AND DEP.ARABIC_NAME = $P{P_REGION_NAME}
GROUP BY
    DEP.ARABIC_NAME,RANK.DESCRIPTION]]>
		</queryString>
		<field name="REGION_NAME" class="java.lang.String"/>
		<field name="DESCRIPTION" class="java.lang.String"/>
		<field name="COUNT" class="java.lang.Integer"/>
	</subDataset>
	<parameter name="P_REPORTS_ROOT" class="java.lang.String">
		<defaultValueExpression><![CDATA["C://u01//WorkFiles//FISReports//"]]></defaultValueExpression>
	</parameter>
	<parameter name="P_DATE_FROM" class="java.lang.String">
		<defaultValueExpression><![CDATA[]]></defaultValueExpression>
	</parameter>
	<parameter name="P_DATE_TO" class="java.lang.String">
		<defaultValueExpression><![CDATA[]]></defaultValueExpression>
	</parameter>
	<parameter name="P_DATE_FROM_FLAG" class="java.lang.String">
		<defaultValueExpression><![CDATA[]]></defaultValueExpression>
	</parameter>
	<parameter name="P_DATE_TO_FLAG" class="java.lang.String">
		<defaultValueExpression><![CDATA[]]></defaultValueExpression>
	</parameter>
	<parameter name="P_SCHEMA_NAME" class="java.lang.String">
		<defaultValueExpression><![CDATA["INFOSYS"]]></defaultValueExpression>
	</parameter>
	<queryString>
		<![CDATA[SELECT
    DEP.ARABIC_NAME AS REGION_NAME
FROM
    $P!{P_SCHEMA_NAME}.STP_VW_DEPARTMENTS DEP
WHERE
    DEP.DEPARTMENT_TYPEID IN (
        100,75
    )
    AND   DEP.ID in
   (
    SELECT LCE.EMPLOYEE_REGION_ID FROM  $P!{P_SCHEMA_NAME}.FIS_VW_LAB_CHECK_EMPLOYEES LCE, $P!{P_SCHEMA_NAME}.STP_VW_RANKS RANK WHERE
    LCE.LAB_CHECK_STATUS = 2
    AND   LCE.CHECK_STATUS = 5
    AND   LCE.EMPLOYEE_RANK_ID = RANK.ID
    AND   RANK.STP_CATEGORIES_ID = 1
    AND ($P{P_DATE_FROM_FLAG} = - 1 OR LCE.ORDER_DATE >= $P!{P_SCHEMA_NAME}.PKG_CHAR_TO_DATE($P{P_DATE_FROM} , 'MI/mm/YYYY'))
    AND ($P{P_DATE_TO_FLAG} = - 1 OR LCE.ORDER_DATE <= $P!{P_SCHEMA_NAME}.PKG_CHAR_TO_DATE($P{P_DATE_TO} , 'MI/mm/YYYY'))
   )
ORDER BY
DEP.ID]]>
	</queryString>
	<field name="REGION_NAME" class="java.lang.String"/>
	<background>
		<band splitType="Stretch"/>
	</background>
	<detail>
		<band height="377" splitType="Stretch">
			<ellipse>
				<reportElement x="327" y="45" width="247" height="242" uuid="fb94e547-d692-4467-a9c7-1ef0a65b4ee2"/>
			</ellipse>
			<pieChart>
				<chart renderType="image">
					<reportElement x="0" y="0" width="900" height="352" uuid="5b47eebf-eeb6-4576-b733-1050215d12c7">
						<property name="net.sf.jasperreports.chart.range.axis.integer.unit" value="true"/>
					</reportElement>
					<chartTitle/>
					<chartSubtitle/>
					<chartLegend>
						<font fontName="Arial" size="16"/>
					</chartLegend>
				</chart>
				<pieDataset>
					<dataset>
						<datasetRun subDataset="pieChart" uuid="d72de251-dd8a-4278-970d-01aab8426e5b">
							<datasetParameter name="P_DATE_FROM">
								<datasetParameterExpression><![CDATA[$P{P_DATE_FROM}]]></datasetParameterExpression>
							</datasetParameter>
							<datasetParameter name="P_DATE_TO">
								<datasetParameterExpression><![CDATA[$P{P_DATE_TO}]]></datasetParameterExpression>
							</datasetParameter>
							<datasetParameter name="P_DATE_FROM_FLAG">
								<datasetParameterExpression><![CDATA[$P{P_DATE_FROM_FLAG}]]></datasetParameterExpression>
							</datasetParameter>
							<datasetParameter name="P_DATE_TO_FLAG">
								<datasetParameterExpression><![CDATA[$P{P_DATE_TO_FLAG}]]></datasetParameterExpression>
							</datasetParameter>
							<datasetParameter name="P_REGION_NAME">
								<datasetParameterExpression><![CDATA[$F{REGION_NAME}]]></datasetParameterExpression>
							</datasetParameter>
						</datasetRun>
					</dataset>
					<keyExpression><![CDATA[$F{DESCRIPTION}]]></keyExpression>
					<valueExpression><![CDATA[$F{COUNT}]]></valueExpression>
					<labelExpression><![CDATA[$F{COUNT}.toString()]]></labelExpression>
				</pieDataset>
				<piePlot>
					<plot/>
					<itemLabel>
						<font fontName="Arial" size="16" pdfEncoding="Identity-V"/>
					</itemLabel>
				</piePlot>
			</pieChart>
			<textField>
				<reportElement x="400" y="357" width="100" height="20" uuid="89ef8f0e-1391-4609-b519-17235923189c"/>
				<textElement textAlignment="Center" verticalAlignment="Middle">
					<font fontName="Arial" size="16" pdfEncoding="Identity-H"/>
				</textElement>
				<textFieldExpression><![CDATA[$F{REGION_NAME}]]></textFieldExpression>
			</textField>
		</band>
	</detail>
</jasperReport>
